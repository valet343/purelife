{{ header }}{{ column_left }}
<div id="content">
	<div class="page-header">
    	<div class="container-fluid">
			<div class="row">
				<ul class="breadcrumb">
					{% for breadcrumb in breadcrumbs %}
						<li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
					{% endfor %}
				</ul>
			</div>
			<br>
			<h1><i class="fa fa-truck"></i> {{ heading_title }} v. {{ v }}</h1>
			<div class="pull-right">
				<a id="button-save" class="btn btn-primary" role="button">{{ button_save_cn }}</a>
				<a href="{{ cn_list }}" data-toggle="tooltip" title="{{ button_cn_list }}" class="btn btn-default" role="button"><i class="fa fa-list-ul"></i></a>
				<a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-danger" role="button"><i class="fa fa-reply"></i></a>
			</div>
    	</div>
  	</div>
  	<div class="container-fluid">
		{% for error in error_warning %}
			<div class="alert alert-danger">
				<i class="fa fa-exclamation-circle"></i> {{ error }}
				<button type="button" class="close" data-dismiss="alert">&times;</button>
			</div>
		{% endfor %}
		<div class="panel panel-default">
			<div class="panel-heading clearfix">
				<h3 class="panel-title" style="padding-top: 5px;"><i class="fa fa-file-text-o" aria-hidden="true"></i> {{ text_form }}</h3>
				<div class="btn-group pull-right" data-toggle="buttons">
					<label class="btn btn-warning btn-sm{{ method == 'EXPRESS' ? ' active' }}" data-toggle="tooltip" title="{{ button_express }}"><input type="radio" name="method" value="EXPRESS" id="input-method-e"{{ method == 'EXPRESS' ? ' checked' }}>E</label>
					<label class="btn btn-warning btn-sm{{ method == 'STANDARD' ? ' active' }}" data-toggle="tooltip" title="{{ button_standard }}"><input type="radio" name="method" value="STANDARD" id="input-method-s"{{ method == 'STANDARD' ? ' checked' }}>S</label>
				</div>
				<div class="btn-group pull-right" data-toggle="buttons" style="margin-right: 15px;">
					<label class="btn btn-default btn-sm{{ bonus_departure ? ' active' }}" data-toggle="tooltip" title="{{ button_bonus_departure }}"><input type="checkbox" name="bonus_departure" value="1" id="input-bonus_departure"{{ bonus_departure ? ' checked' }}>$</label>
				</div>
			</div>
			<div class="panel-body">
				<form class="form-horizontal">
					<div class="row">
						<div class="col-sm-6">
							<div class="panel panel-default">
								<div class="panel-heading clearfix" style="padding-top: 5px; padding-bottom: 5px;">
									<h3 class="panel-title" style="padding-top: 5px;">{{ text_sender }}</h3>
									<div class="btn-group pull-right" data-toggle="buttons">
										<label class="btn btn-default btn-sm{{ sender_address_pick_up ? ' active' }}" data-toggle="tooltip" title="{{ button_address_pick_up }}"><input type="checkbox" name="sender_address_pick_up" id="input-sender_address_pick_up" value="1"{{ sender_address_pick_up ? ' checked' }}><i class="fa fa-home" aria-hidden="true"></i></label>
									</div>
								</div>
								<div class="panel-body">
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_name">{{ entry_sender }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_name" value="{{ sender_name }}" placeholder="{{ entry_sender }}" id="input-sender_name" class="form-control" />
											<input type="hidden" name="sender" value="{{ sender }}" id="input-sender" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_type">{{ entry_client_type }}</label>
										<div class="col-sm-9">
											<select name="sender_type" id="input-sender_type" class="form-control">
												<option value="">{{ text_select }}</option>
												{% for v in client_types %}
													<option value="{{ v.id }}"{{ v.id == sender_type ? ' selected="selected"' }}>{{ v.description }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_tin">{{ entry_tin }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_tin" value="{{ sender_tin }}" placeholder="{{ entry_tin }}" id="input-sender_tin" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_edrpou">{{ entry_edrpou }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_edrpou" value="{{ sender_edrpou }}" placeholder="{{ entry_edrpou }}" id="input-sender_edrpou" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_bank_account">{{ entry_bank_account }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_bank_account" value="{{ sender_bank_account }}" placeholder="{{ entry_bank_account }}" id="input-sender_bank_account" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_email">{{ entry_email }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_email" value="{{ sender_email }}" placeholder="{{ entry_email }}" id="input-sender_email" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_phone">{{ entry_phone }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="sender_phone" value="{{ sender_phone }}" placeholder="{{ entry_phone }}" id="input-sender_phone" class="form-control" />
												<span class="input-group-btn">
													<button type="button" id="button-sender_search" data-toggle="tooltip" title="{{ button_search }}" class="btn btn-default"><i class="fa fa-search" aria-hidden="true"></i></button>
												</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_region">{{ entry_region }}</label>
										<div class="col-sm-9">
											<select name="sender_region" id="input-sender_region" class="form-control selectpicker show-tick" data-live-search="true">
												<option value="">{{ text_select }}</option>
												{% for v in regions %}
													<option value="{{ v.REGION_ID }}"{{ v.REGION_ID == sender_region ? ' selected="selected"' }}>{{ v.description }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_city">{{ entry_city }}</label>
										<div class="col-sm-9">
											<select name="sender_city" id="input-sender_city" class="form-control selectpicker show-tick" data-live-search="true"></select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_street">{{ entry_street }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_street" value="{{ sender_street }}" placeholder="{{ entry_street }}" id="input-sender_street" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_house">{{ entry_house }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_house" value="{{ sender_house }}" placeholder="{{ entry_house }}" id="input-sender_house" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_flat">{{ entry_flat }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_flat" value="{{ sender_flat }}" placeholder="{{ entry_flat }}" id="input-sender_flat" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-sender_postcode">{{ entry_postcode }}</label>
										<div class="col-sm-9">
											<input type="text" name="sender_postcode" value="{{ sender_postcode }}" placeholder="{{ entry_postcode }}" id="input-sender_postcode" class="form-control" />
											<input type="hidden" name="sender_address" value="{{ sender_address }}" id="input-sender_address" />
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="panel panel-default">
								<div class="panel-heading clearfix" style="padding-top: 5px; padding-bottom: 5px;">
									<h3 class="panel-title" style="padding-top: 5px;">{{ text_recipient }}</h3>
									<div class="btn-group pull-right" data-toggle="buttons">
										<label class="btn btn-default btn-sm{{ recipient_service_type == 'W' ? ' active' }}" data-toggle="tooltip" title="{{ button_warehouse_delivery }}"><input type="radio" name="recipient_service_type" value="W" id="input-recipient_service_type"{{ recipient_service_type == 'W' ? ' checked' }}><i class="fa fa-map-marker" aria-hidden="true"></i></label>
										<label class="btn btn-default btn-sm{{ recipient_service_type == 'D' ? ' active' }}" data-toggle="tooltip" title="{{ button_doors_delivery }}"><input type="radio" name="recipient_service_type" value="D" id="input-recipient_service_type"{{ recipient_service_type == 'D' ? ' checked' }}><i class="fa fa-home" aria-hidden="true"></i></label>
									</div>
								</div>
								<div class="panel-body">
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_name">{{ entry_recipient }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_name" value="{{ recipient_name }}" placeholder="{{ entry_recipient }}" id="input-recipient_name" class="form-control" />
											<input type="hidden" name="recipient" value="{{ recipient }}" id="input-recipient" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_type">{{ entry_client_type }}</label>
										<div class="col-sm-9">
											<select name="recipient_type" id="input-recipient_type" class="form-control">
												<option value="">{{ text_select }}</option>
												{% for v in client_types %}
													<option value="{{ v.id }}"{{ v.id == recipient_type ? ' selected="selected"' }}>{{ v.description }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_tin">{{ entry_tin }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_tin" value="{{ recipient_tin }}" placeholder="{{ entry_tin }}" id="input-recipient_tin" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_edrpou">{{ entry_edrpou }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_edrpou" value="{{ recipient_edrpou }}" placeholder="{{ entry_edrpou }}" id="input-recipient_edrpou" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_phone">{{ entry_phone }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="recipient_phone" value="{{ recipient_phone }}" placeholder="{{ entry_phone }}" id="input-recipient_phone" class="form-control" />
												<span class="input-group-btn">
													<button type="button" id="button-recipient_search" data-toggle="tooltip" title="{{ button_search }}" class="btn btn-default"><i class="fa fa-search" aria-hidden="true"></i></button>
												</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_region">{{ entry_region }}</label>
										<div class="col-sm-9">
											<select name="recipient_region" id="input-recipient_region" class="form-control selectpicker show-tick" data-live-search="true">
												<option value="">{{ text_select }}</option>
												{% for v in regions %}
													<option value="{{ v.REGION_ID }}"{{ v.REGION_ID == recipient_region ? ' selected="selected"' }}>{{ v.description }}</option>
												{% endfor %}
											</select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_city" data-toggle="tooltip" data-placement="right" title="{{ recipient_city_name }}">{{ entry_city }}</label>
										<div class="col-sm-9">
											<select name="recipient_city" id="input-recipient_city" class="form-control selectpicker show-tick" data-live-search="true"></select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_department" data-toggle="tooltip" data-placement="right" title="{{ recipient_department_name }}">{{ entry_department }}</label>
										<div class="col-sm-9">
											<select name="recipient_department" id="input-recipient_department" class="form-control selectpicker show-tick" data-live-search="true"></select>
										</div>
									</div>
									<div class="form-group" style="display: none">
										<label class="col-sm-3 control-label" for="input-recipient_street">{{ entry_street }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_street" value="{{ recipient_street }}" placeholder="{{ entry_street }}" id="input-recipient_street" class="form-control" />
										</div>
									</div>
									<div class="form-group" style="display: none">
										<label class="col-sm-3 control-label" for="input-recipient_house">{{ entry_house }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_house" value="{{ recipient_house }}" placeholder="{{ entry_house }}" id="input-recipient_house" class="form-control" />
										</div>
									</div>
									<div class="form-group" style="display: none">
										<label class="col-sm-3 control-label" for="input-recipient_flat">{{ entry_flat }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_flat" value="{{ recipient_flat }}" placeholder="{{ entry_flat }}" id="input-recipient_flat" class="form-control" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-recipient_postcode">{{ entry_postcode }}</label>
										<div class="col-sm-9">
											<input type="text" name="recipient_postcode" value="{{ recipient_postcode }}" placeholder="{{ entry_postcode }}" id="input-recipient_postcode" class="form-control" />
											<input type="hidden" name="recipient_address" value="{{ recipient_address_id }}" id="input-recipient_address" />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-6">
							<div class="panel panel-default">
								<div class="panel-heading">
									<h3 class="panel-title">{{ text_departure_options }}</h3>
								</div>
								<div class="panel-body">
									{% for v in parcels %}
									<legend id="text-seat-{{ loop.index0 }}">{{ text_seat }} {{ loop.index0 + 1 }}</legend>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-weight-{{ loop.index0 }}">{{ entry_weight }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="parcels[{{ loop.index0 }}][weight]" value="{{ parcels[loop.index0] ? parcels[loop.index0]['weight'] : 0 }}" placeholder="{{ entry_weight }}" id="input-weight-{{ loop.index0 }}" class="form-control" />
												<span class="input-group-addon">{{ text_kg }}</span>
											</div>
                                            <input type="hidden" name="parcels[{{ loop.index0 }}][uuid]" value="{{ parcels[loop.index0]['uuid'] ? parcels[loop.index0]['uuid'] : '' }}" id="input-uuid-{{ loop.index0 }}" />
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-length-{{ loop.index0 }}">{{ entry_length }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="parcels[{{ loop.index0 }}][length]" value="{{ parcels[loop.index0] ? parcels[loop.index0]['length'] : 0 }}" placeholder="{{ entry_length }}" id="input-length-{{ loop.index0 }}" class="form-control" />
												<span class="input-group-addon">{{ text_cm }}</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-width-{{ loop.index0 }}">{{ entry_width }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="parcels[{{ loop.index0 }}][width]" value="{{ parcels[loop.index0] ? parcels[loop.index0]['width'] : 0 }}" placeholder="{{ entry_width }}" id="input-width-{{ loop.index0 }}" class="form-control" />
												<span class="input-group-addon">{{ text_cm }}</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-height-{{ loop.index0 }}">{{ entry_height }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="parcels[{{ loop.index0 }}][height]" value="{{ parcels[loop.index0] ? parcels[loop.index0]['height'] : 0 }}" placeholder="{{ entry_height }}" id="input-height-{{ loop.index0 }}" class="form-control" />
												<span class="input-group-addon">{{ text_cm }}</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-declared_cost-{{ loop.index0 }}">{{ entry_declared_cost }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<span class="input-group-btn">
													<button type="button" id="button-components_list-{{ loop.index0 }}" onclick="$('#input-declared_cost_id').val('{{ loop.index0 }}');" data-toggle="modal" data-target="#modal-totals-list" data-tooltip="true" title="{{ button_components_list }}" class="btn btn-default"><i class="fa fa-list" aria-hidden="true"></i></button>
												</span>
												<input type="text" name="parcels[{{ loop.index0 }}][declared_cost]" value="{{ parcels[loop.index0] ? parcels[loop.index0]['declared_cost'] : 0 }}" placeholder="{{ entry_declared_cost }}" id="input-declared_cost-{{ loop.index0 }}" class="form-control" />
												<span class="input-group-addon">{{ text_grn }}</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-departure_description-{{ loop.index0 }}">{{ entry_departure_description }}</label>
										<div class="col-sm-9">
											<textarea name="parcels[{{ loop.index0 }}][departure_description]" rows="2" id="input-departure_description-{{ loop.index0 }}" maxlength="40" class="form-control">{{ parcels[loop.index0] ?  parcels[loop.index0]['departure_description'] : '' }}</textarea>
										</div>
									</div>
									{% endfor %}
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-seats_amount">{{ entry_seats_amount }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="seats_amount" value="{{ seats_amount }}" placeholder="{{ entry_seats_amount }}" id="input-seats_amount" class="form-control" />
												<span class="input-group-btn">
													<button type="button" id="button-seat_plus" onclick="addSeat();" class="btn btn-default"><i class="fa fa-plus" aria-hidden="true"></i></button>
													<button type="button" id="button-seat_minus" onclick="deleteSeat();" class="btn btn-default"><i class="fa fa-minus" aria-hidden="true"></i></button>
												</span>
												<span class="input-group-addon">{{ text_pc }}</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="panel panel-default">
								<div class="panel-heading">
									<h3 class="panel-title">{{ text_payment }}</h3>
								</div>
								<div class="panel-body">
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-delivery_payer">{{ entry_delivery_payer }}</label>
										<div class="col-sm-9">
											<div class="btn-group" data-toggle="buttons">
												{% for payer_type in references['payer_types'] %}
												<label class="btn btn-default{{ payer_type.id == delivery_payer ? ' active' }}">
													<input type="radio" name="delivery_payer" value="{{ payer_type.id }}" id="input-delivery_payer-{{ payer_type.id }}"{{ payer_type.id == delivery_payer ? ' checked' }}>
													{{ payer_type.description }}
												</label>
												{% endfor %}
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-backward_delivery_total">{{ entry_backward_delivery_total }}</label>
										<div class="col-sm-9">
											<div class="input-group">
												<input type="text" name="backward_delivery_total" value="{{ backward_delivery_total }}" placeholder="{{ entry_backward_delivery_total }}" id="input-backward_delivery_total" class="form-control" />
												<span class="input-group-addon">{{ text_grn }}</span>
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-backward_delivery_payer">{{ entry_backward_delivery_payer }}</label>
										<div class="col-sm-9">
											<div class="btn-group" data-toggle="buttons">
												{% for v in references['backward_delivery_payers'] %}
												<label class="btn btn-default{{ v.id == backward_delivery_payer ? ' active' }}">
													<input type="radio" name="backward_delivery_payer" value="{{ v.id }}" id="input-backward_delivery_payer-{{ v.id }}"{{ v.id == backward_delivery_payer ? ' checked' }}>
													{{ v.description }}
												</label>
												{% endfor %}
											</div>
										</div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 control-label" for="input-money_transfer_method">{{ entry_money_transfer_method }}</label>
										<div class="col-sm-9">
											<div class="btn-group" data-toggle="buttons">
												{% for k, v in money_transfer_methods %}
												<label class="btn btn-default{{ k == money_transfer_method ? ' active' }}">
													<input type="radio" name="money_transfer_method" value="{{ k }}" id="input-money_transfer_method-{{ k }}"{{ k == money_transfer_method ? ' checked' }}>
													{{ v }}
												</label>
												{% endfor %}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12">
							<div class="panel panel-default">
								<div class="panel-heading">
									<h3 class="panel-title">{{ text_additionally }}</h3>
								</div>
								<div class="panel-body">
									<div class="col-sm-6">
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-delivery_notification">{{ entry_delivery_notification }}</label>
											<div class="col-sm-9">
												<input type="checkbox" name="delivery_notification" id="input-delivery_notification" data-on="<i class='fa fa-check'></i>" data-off="<i class='fa fa-times'></i>" data-toggle="toggle" data-onstyle="info" data-offstyle="default"{{ delivery_notification ? ' checked' }}>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-sms_message">{{ entry_sms_message }}</label>
											<div class="col-sm-9">
												<input type="checkbox" name="sms_message" id="input-sms_message" data-on="<i class='fa fa-check'></i>" data-off="<i class='fa fa-times'></i>" data-toggle="toggle" data-onstyle="info" data-offstyle="default"{{ sms_message ? ' checked' }}>
											</div>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-check_on_delivery">{{ entry_check_on_delivery }}</label>
											<div class="col-sm-9">
												<input type="checkbox" name="check_on_delivery" id="input-check_on_delivery" data-on="<i class='fa fa-check'></i>" data-off="<i class='fa fa-times'></i>" data-toggle="toggle" data-onstyle="info" data-offstyle="default"{{ check_on_delivery ? ' checked' }}>
											</div>
										</div>
										<div class="form-group">
											<label class="col-sm-3 control-label" for="input-on_fail_receive">{{ entry_on_fail_receive }}</label>
											<div class="col-sm-9">
												<select name="on_fail_receive" id="input-on_fail_receive" class="form-control">
													<option value="0">{{ text_select }}</option>
													{% for v in fail_receive_types %}
														<option value="{{ v.id }}"{{ v.id == on_fail_receive ? ' selected="selected"' }}>{{ v.description }}</option>
													{% endfor %}
												</select>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Modal of totals list START -->
					<div class="modal fade" id="modal-totals-list" tabindex="-1" role="dialog" aria-labelledby="totals-list-label">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
									<h4 class="modal-title" id="totals-list-label">{{ heading_components_list }}</h4>
								</div>
								<div class="modal-body">
									<input type="hidden" name="declared_cost_id" value="" id="input-declared_cost_id">
									<div class="table-responsive">
										<table class="table table-striped" id="table-totals_list">
											<thead>
												<tr>
													<td>{{ column_description }}</td>
													<td class="text-center">{{ column_price }}</td>
													<td class="text-center">{{ column_action }}</td>
												</tr>
											</thead>
											<tbody>
											{% for v in totals %}
												<tr>
													<td>{{ v.title }}</td>
													<td class="text-center">{{ v.price }} {{ text_grn }}</td>
													<td class="text-center">
														{% if v.status %}
															<button type="button" class="btn btn-danger btn-xs" id="button-total_declared_cost_minus"><i class="fa fa-minus"></i></button>
														{% else %}
															<button type="button" class="btn btn-success btn-xs" id="button-total_declared_cost_plus"><i class="fa fa-plus"></i></button>
														{% endif %}
													</td>
												</tr>
											{% endfor %}
											</tbody>
											<tfoot>
											<tr>
												<td><strong>{{ text_declared_cost }}</strong></td>
												<td class="text-center" id="td-declared_cost_total"><strong>{{ parcels[0] ? parcels[0]['declared_cost'] : 0 }} {{ text_grn }}</strong></td>
												<td></td>
											</tr>
											</tfoot>
										</table>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" onclick="saveDeclaredCost();" class="btn btn-primary"><i class="fa fa-check"></i></button>
									<button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i></button>
								</div>
							</div>
						</div>
					</div>
					<!-- Modal of totals list END -->

				</form>
			</div>
		</div>
	</div>
</div>
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-{{ translations_code }}.min.js"></script>
<script type="text/javascript"><!--
	function validateForm(element) {
		var post_data = element.name + '=' + encodeURIComponent(element.value);

		if (element.name == 'backward_delivery_payer') {
			post_data += '&backward_delivery_total=' + encodeURIComponent($('#input-backward_delivery_total').val());
		}

		$.ajax({
			url: 'index.php?route=extension/shipping/ukrposhta/getCNForm&user_token={{ user_token }}',
			type: 'POST',
			data: post_data,
			dataType: 'json',
			success: function(json) {
				checkErrors(json);
			}
		});
	}

	function checkErrors(array) {
		if (array['warning']) {
			if (array['warning'] instanceof Array || array['warning'] instanceof Object) {
				for(var w in array['warning']) {
					$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + array['warning'][w] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				}
			} else {
				$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + array['warning'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
			}
		}

		for (var field in array['errors']) {
			$('div.form-group').has('label[for="input-' + field + '"]').addClass('has-error');
			$('#span-' + field).remove('.help-block');
			$('div.form-group > div[class^="col-sm"]').has('#input-' + field).append('<span id="span-' + field + '" class="help-block">' + array['errors'][field] + '</span>');
		}

        for (var field in array['success']) {
            $('div.form-group').has('label[for="input-' + field + '"]').removeClass('has-error');
            $('#span-' + field).remove('.help-block');
        }

        if (array['errors'] && array['errors']['parcels']) {
            for (var i in array['errors']['parcels']) {
                for (var field in array['errors']['parcels'][i]) {
                    $('div.form-group').has('label[for="input-' + field + '-' + i + '"]').addClass('has-error');
                    $('#span-' + field + '-' + i).remove('.help-block');
                    $('div.form-group > div[class^="col-sm"]').has('#input-' + field + '-' + i).append('<span id="span-' + field + '-' + i + '" class="help-block">' + array['errors']['parcels'][i][field] + '</span>');
                }
            }
        }

        if (array['success'] && array['success']['parcels']) {
            for (var i in array['success']['parcels']) {
                for (var field in array['success']['parcels'][i]) {
                    $('div.form-group').has('label[for="input-' + field + '-' + i + '"]').removeClass('has-error');
                    $('#span-' + field + '-' + i).remove('.help-block');
                }
            }
        }
	}

	function addSeat() {
		var
			html = '',
			$seats = $('#input-seats_amount'),
			count = $('input[id^="input-weight"]').length;

		html += '<legend id="text-seat-' + count + '">{{ text_seat }} ' + (count + 1) + '</legend>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-weight-' + count + '">{{ entry_weight }}</label><div class="col-sm-9"><div class="input-group"><input type="text" name="parcels[' + count + '][weight]" value="0" placeholder="{{ entry_weight }}" id="input-weight-' + count + '" class="form-control" /><span class="input-group-addon">{{ text_kg }}</span><input type="hidden" name="parcels[' + count + '][uuid]" value="" id="input-uuid-' + count + '" /></div></div></div>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-length-' + count + '">{{ entry_length }}</label><div class="col-sm-9"><div class="input-group"><input type="text" name="parcels[' + count + '][length]" value="0" placeholder="{{ entry_length }}" id="input-length-' + count + '" class="form-control" /><span class="input-group-addon">{{ text_cm }}</span></div></div></div>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-width-' + count + '">{{ entry_width }}</label><div class="col-sm-9"><div class="input-group"><input type="text" name="parcels[' + count + '][width]" value="0" placeholder="{{ entry_width }}" id="input-width-' + count + '" class="form-control" /><span class="input-group-addon">{{ text_cm }}</span></div></div></div>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-height-' + count + '">{{ entry_height }}</label><div class="col-sm-9"><div class="input-group"><input type="text" name="parcels[' + count + '][height]" value="0" placeholder="{{ entry_height }}" id="input-height-' + count + '" class="form-control" /><span class="input-group-addon">{{ text_cm }}</span></div></div></div>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-declared_cost-' + count + '">{{ entry_declared_cost }}</label><div class="col-sm-9"><div class="input-group"><span class="input-group-btn"><button type="button" id="button-components_list-' + count + '" onclick="$(\'#input-declared_cost_id\').val(' + count + ');" data-toggle="modal" data-target="#modal-totals-list" data-tooltip="true" title="{{ button_components_list }}" class="btn btn-default"><i class="fa fa-list" aria-hidden="true"></i></button></span><input type="text" name="parcels[' + count + '][declared_cost]" value="0" placeholder="{{ entry_declared_cost }}" id="input-declared_cost-' + count + '" class="form-control" /><span class="input-group-addon">{{ text_grn }}</span></div></div></div>';
		html += '<div class="form-group"><label class="col-sm-3 control-label" for="input-departure_description-' + count + '">{{ entry_departure_description }}</label><div class="col-sm-9"><textarea name="parcels[' + count + '][departure_description]" rows="2" id="input-departure_description-' + count + '" maxlength="40" class="form-control"></textarea></div></div>';

		$('textarea[id^="input-departure_description"]:last').parents('div.form-group').after(html);

		$seats.val(+$seats.val() + 1).trigger('change');
	}

    function deleteSeat() {
        var
				$seats = $('#input-seats_amount'),
				count = $('input[id^="input-weight"]').length;

        if (count > 1) {
			$('legend[id^="text-seat-"]:last').remove();
			$('input[id^="input-weight-"]:last').parents('div.form-group').remove();
			$('input[id^="input-length-"]:last').parents('div.form-group').remove();
			$('input[id^="input-width-"]:last').parents('div.form-group').remove();
			$('input[id^="input-height-"]:last').parents('div.form-group').remove();
			$('input[id^="input-declared_cost-"]:last').parents('div.form-group').remove();
			$('textarea[id^="input-departure_description-"]:last').parents('div.form-group').remove();
        }

		if ($seats.val() > 1) {
			$seats.val(+$seats.val() - 1).trigger('change');
		}
    }

	function saveDeclaredCost() {
	    var id = $('#input-declared_cost_id').val();

		$('#input-declared_cost-' + id).val(parseInt($('#td-declared_cost_total')[0].outerText));

		$('#modal-totals-list').modal('hide');
	}

	function formHandler(element) {
		switch(element.id) {
            case 'input-sender_type':
                if (element.value == 'COMPANY') {
                    $('#input-sender_tin').parents('div.form-group').fadeOut();
                    $('#input-sender_edrpou, #input-sender_bank_account').parents('div.form-group').fadeIn();
                } else if (element.value == 'PRIVATE_ENTREPRENEUR') {
                    $('#input-sender_edrpou').parents('div.form-group').fadeOut();
                    $('#input-sender_tin, #input-sender_bank_account').parents('div.form-group').fadeIn();
                } else {
                    $('#input-sender_edrpou, #input-sender_bank_account').parents('div.form-group').fadeOut();
                    $('#input-sender_tin').parents('div.form-group').fadeIn();
                }

                break;

			case 'input-sender_name':
                if (!$('#input-sender_name').val()) {
                    $('#input-sender').val('');
                }

				break;

            case 'input-sender_street':
            case 'input-sender_house':
            case 'input-sender_flat':
            case 'input-sender_postcode':
                $('#input-sender_address').val('');

                break;

			case 'input-sender_region':
				$.ajax({
					url: 'index.php?route=extension/shipping/ukrposhta/ukrposhtaData&user_token={{ user_token }}',
					type: 'POST',
					data: 'action=getCities&filter=' + encodeURIComponent(element.value),
					dataType: 'json',
					beforeSend: function () {
						$('#input-sender_city').parent().css('position', 'relative').prepend('<div id="ocmax-loader-sender_city" style="position: absolute; left: 50%; top: 50%; transform: translateY(-50%); z-index: 9999;"><i class="fa fa-clock-o fa-spin fa-lg fa-fw" aria-hidden="true"></i></div>');
					},
					complete: function () {
						$('#ocmax-loader-sender_city').remove();
					},
					success: function (json) {
						if (json instanceof Array) {
							var
									html = '<option value="">{{ text_select }}</option>',
									subtext,
									option_s;

							for(var i in json) {
								if (!element.value) {
									subtext = ' data-subtext="' + json[i]['district_description'] + ', ' + json[i]['region_description'] + '"';
								} else {
									subtext = ' data-subtext="' + json[i]['district_description'] + '"';
								}

								if (json[i]['CITY_ID'] == '{{ sender_city }}') {
									option_s = ' selected="selected"';
								} else {
									option_s = '';
								}

								html += '<option value="' + json[i]['CITY_ID'] + '"' + subtext + option_s + '>' + json[i]['description'] + '</option>'
							}

							$('#input-sender_city').html(html).selectpicker('refresh').trigger('change');
						}
					}
				});

				break;

            case 'input-recipient_type':
                if (element.value == 'COMPANY') {
                    $('#input-recipient_tin').parents('div.form-group').fadeOut();
                    $('#input-recipient_edrpou').parents('div.form-group').fadeIn();
                } else if (element.value == 'PRIVATE_ENTREPRENEUR') {
                    $('#input-recipient_edrpou').parents('div.form-group').fadeOut();
                    $('#input-recipient_tin').parents('div.form-group').fadeIn();
                } else {
                    $('#input-recipient_tin, #input-recipient_edrpou').parents('div.form-group').fadeOut();
                }

                break;

            case 'input-recipient_name':
                if (!$('#input-recipient_name').val()) {
                    $('#input-recipient').val('');
                }

                break;

			case 'input-recipient_service_type':
				if (element.value == 'D') {
					$('[for="input-recipient_department"]').filter(':visible').parent().fadeOut();
					$('[for="input-recipient_street"], [for="input-recipient_house"], [for="input-recipient_flat"]').filter(':hidden').parent().fadeIn();
				} else {
					$('[for="input-recipient_department"]').filter(':hidden').parent().fadeIn();
					$('[for="input-recipient_street"], [for="input-recipient_house"], [for="input-recipient_flat"]').filter(':visible').parent().fadeOut();
				}

				break;

			case 'input-recipient_region':
				$.ajax({
					url: 'index.php?route=extension/shipping/ukrposhta/ukrposhtaData&user_token={{ user_token }}',
					type: 'POST',
					data: 'action=getCities&filter=' + encodeURIComponent(element.value),
					dataType: 'json',
					beforeSend: function () {
						$('#input-recipient_city').parent().css('position', 'relative').prepend('<div id="ocmax-loader-recipient_city" style="position: absolute; left: 50%; top: 50%; transform: translateY(-50%); z-index: 9999;"><i class="fa fa-clock-o fa-spin fa-lg fa-fw" aria-hidden="true"></i></div>');
					},
					complete: function () {
						$('#ocmax-loader-recipient_city').remove();
					},
					success: function (json) {
						if (json instanceof Array) {
							var
									html = '<option value="">{{ text_select }}</option>',
									subtext,
									option_s;

							for(var i in json) {
								if (!element.value) {
									subtext = ' data-subtext="' + json[i]['district_description'] + ', ' + json[i]['region_description'] + '"';
								} else {
									subtext = ' data-subtext="' + json[i]['district_description'] + '"';
								}

								if (json[i]['CITY_ID'] == '{{ recipient_city }}') {
									option_s = ' selected="selected"';
								} else {
									option_s = '';
								}

								html += '<option value="' + json[i]['CITY_ID'] + '"' + subtext + option_s + '>' + json[i]['description'] + '</option>'
							}

							$('#input-recipient_city').html(html).selectpicker('refresh').trigger('change');
						}
					}
				});

				break;

			case 'input-recipient_city':
				$.ajax({
					url: 'index.php?route=extension/shipping/ukrposhta/ukrposhtaData&user_token={{ user_token }}',
					type: 'POST',
					data: 'action=getDepartments&filter=' + encodeURIComponent(element.value),
					dataType: 'json',
					beforeSend: function () {
						$('#input-recipient_department').parent().css('position', 'relative').prepend('<div id="ocmax-loader-recipient_department" style="position: absolute; left: 50%; top: 50%; transform: translateY(-50%); z-index: 9999;"><i class="fa fa-clock-o fa-spin fa-lg fa-fw" aria-hidden="true"></i></div>');
					},
					complete: function () {
						$('#ocmax-loader-recipient_department').remove();
					},
					success: function (json) {
						if (json instanceof Array) {
							var
									html = '<option value="">{{ text_select }}</option>',
									option_s;

							for(var i in json) {
								if (json[i]['department_id'] == '{{ recipient_department }}') {
									option_s = ' selected="selected"';
								} else {
									option_s = '';
								}

								html += '<option value="' + json[i]['department_id'] + '"' + option_s + '>' + json[i]['description'] + '</option>'
							}

							$('#input-recipient_department').html(html).selectpicker('refresh').trigger('change');
						}
					}
				});

				break;

			case 'input-recipient_department':
				var postcode = $('#input-recipient_department option:selected').text().split(',');

				if (/^\d+$/.test(postcode[0].trim())) {
					$('#input-recipient_postcode').val(postcode[0].trim()).trigger('change');
				}

				break;

            case 'input-recipient_street':
            case 'input-recipient_house':
            case 'input-recipient_flat':
            case 'input-recipient_postcode':
                $('#input-recipient_address').val('');

                break;

			case 'input-backward_delivery_total':
				if (+element.value) {
					$('#input-backward_delivery_payer').trigger('change').parents('div.form-group').fadeIn();
				} else {
                    $('#input-backward_delivery_payer').trigger('change').parents('div.form-group').fadeOut();
				}

				break;

            case 'input-backward_delivery_payer':
                if (element.value == 'recipient' && $('#input-backward_delivery_total').val()) {
                    $('#input-money_transfer_method').parents('div.form-group').fadeIn();
                } else {
                    $('#input-money_transfer_method').parents('div.form-group').fadeOut();
                }

                break;
		}
	}

	$( function () {
		$('.selectpicker').selectpicker({
			liveSearchStyle: 'contains',
			iconBase: 'fa',
			tickIcon: 'fa-check'
		});

		$('[data-tooltip=true]').tooltip();

        $.ajaxSetup({
            error: function (jqXHR, textStatus, errorThrown) {
                console.log(textStatus);
            }
        });

		$('.date').datetimepicker( {pickTime: false} ).on('change', function () {
			var input = $(this).find('input')[0];

			formHandler(input);
			validateForm(input);
		} );

		$('form').on('change', 'input, select, textarea', function() {
			setTimeout(formHandler, 100, this);
			setTimeout(validateForm, 200, this);
		} );

		$('#input-sender_type, #input-sender_region, #input-recipient_service_type:checked, #input-recipient_type, #input-recipient_region, #input-recipient_city, #input-backward_delivery_total').each(function() {
			formHandler(this);
		} );

		/* Change totals list */
		$('#modal-totals-list').on('click', '#button-total_declared_cost_minus, #button-total_declared_cost_plus', function (e) {
			var b = $(e.currentTarget),
				cost = parseInt(b.parents('tr').find('td:eq(1)').text()),
				total = $('#td-declared_cost_total')[0].outerText;

			if (e.currentTarget.id == 'button-total_declared_cost_minus') {
				b.replaceWith('<button type="button" class="btn btn-success btn-xs" id="button-total_declared_cost_plus"><i class="fa fa-plus"></i></button>');

				total = total.replace(/-?\d+/, parseInt(total) - cost);
			} else {
				b.replaceWith('<button type="button" class="btn btn-danger btn-xs" id="button-total_declared_cost_minus"><i class="fa fa-minus"></i></button>');

				total = total.replace(/-?\d+/, parseInt(total) + cost);
			}

			$('#td-declared_cost_total').html('<strong>' + total + '</strong>');
		} );

		$('#button-sender_search').on('click', function(e) {
			var $button = $(e.currentTarget);

			$.ajax( {
				url: 'index.php?route=extension/shipping/ukrposhta/ukrposhtaData&user_token={{ user_token }}',
				type: 'POST',
				data: 'action=getClientByPhone&filter=' + encodeURIComponent($('#input-sender_phone').val()),
				dataType: 'json',
				beforeSend: function() {
					$button.find('i').removeClass().addClass('fa fa-circle-o-notch fa-spin');
				},
				complete: function() {
					var $alerts = $('.alert-danger, .alert-success');

					setTimeout(function() { $alerts.fadeOut(); }, 5000);

					$button.find('i').removeClass().addClass('fa fa-search');
					$('div').removeClass('has-success has-error');
					$('span.help-block').remove();
				},
				success: function (json) {
					if (json['success']) {
						$('.container-fluid:eq(2)').prepend('<div class="alert alert-success"><i class="fa fa-check-circle"></i> ' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

						$('#input-sender_type').val(json['type']).trigger('change');
						$('#input-sender').val(json['uuid']);
						$('#input-sender_name').val(json['name']);
						$('#input-sender_tin').val(json['tin']);
						$('#input-sender_edrpou').val(json['edrpou']);
						$('#input-sender_bank_account').val(json['bankAccount']);
						$('#input-sender_email').val(json['email']);
						$('#input-sender_address').val(json['addressId']);
						$('#input-sender_region').val(json['zone_id']);
						$('#input-sender_city').val(json['city']);
						$('#input-sender_street').val(json['street']);
						$('#input-sender_house').val(json['houseNumber']);
						$('#input-sender_flat').val(json['apartmentNumber']);
						$('#input-sender_postcode').val(json['postcode']);
					} else {
						if (json['error']) {
							$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
						}
						if (json['warning']) {
							$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['warning'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
						}
					}
				}
			} );
		} );

		$('#button-recipient_search').on('click', function(e) {
			var $button = $(e.currentTarget);

			$.ajax( {
				url: 'index.php?route=extension/shipping/ukrposhta/ukrposhtaData&user_token={{ user_token }}',
				type: 'POST',
				data: 'action=getClientByPhone&filter=' + encodeURIComponent($('#input-recipient_phone').val()),
				dataType: 'json',
				beforeSend: function() {
					$button.find('i').removeClass().addClass('fa fa-circle-o-notch fa-spin');
				},
				complete: function() {
					var $alerts = $('.alert-danger, .alert-success');

					setTimeout(function() { $alerts.fadeOut(); }, 5000);

					$button.find('i').removeClass().addClass('fa fa-search');
					$('div').removeClass('has-success has-error');
					$('span.help-block').remove();
				},
				success: function (json) {
					if (json['success']) {
						$('.container-fluid:eq(2)').prepend('<div class="alert alert-success"><i class="fa fa-check-circle"></i> ' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

						$('#input-recipient_type').val(json['type']).trigger('change');
						$('#input-recipient').val(json['uuid']);
						$('#input-recipient_name').val(json['name']);
						$('#input-recipient_tin').val(json['tin']);
						$('#input-recipient_edrpou').val(json['edrpou']);
						$('#input-recipient_address').val(json['addressId']);
						$('#input-recipient_region').val(json['zone_id']);
						$('#input-recipient_city').val(json['city']);
						$('#input-recipient_street').val(json['street']);
						$('#input-recipient_house').val(json['houseNumber']);
						$('#input-recipient_flat').val(json['apartmentNumber']);
						$('#input-recipient_postcode').val(json['postcode']);
					} else {
						if (json['error']) {
							$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
						}
						if (json['warning']) {
							$('.container-fluid:eq(2)').prepend('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i> ' + json['warning'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
						}
					}
				}
			} );
		} );

		/* Save CN */
		$('#button-save').on('click', function () {
			var $post_data = $('input[type="text"], input[type="radio"]:checked, input[type="checkbox"]:checked, select, textarea').filter(':visible').add('input[type="hidden"]');

			$.ajax( {
				url: 'index.php?route=extension/shipping/ukrposhta/saveCN&order_id={{ order_id }}&cn_uuid={{ cn_uuid }}&user_token={{ user_token }}',
				type: 'POST',
				data: $post_data,
				dataType: 'json',
				beforeSend: function() {
					$('body').fadeTo('fast', 0.8).prepend('<div id="ocmax-loader" style="position: fixed; top: 50%;	left: 50%; z-index: 9999;"><i class="fa fa-clock-o fa-spin fa-3x fa-fw"></i></div>');
				},
				complete: function(json){
					var $alerts = $('.alert-danger, .alert-success');

					if ($alerts.length !== 0) {
						setTimeout(function() { $alerts.remove() }, 15000);
					}

					if (json['errors'] != 'undefined' || json['warning'] != 'undefined') {
						$('html, body').animate({ scrollTop: $('.has-error, .alert').offset().top }, 1000);
					}

					$('body').fadeTo('fast', 1)
					$('#ocmax-loader').remove();
				},
				success: function(json) {
					if (json['success']) {
						location.href = 'index.php?route=extension/shipping/ukrposhta/getCNList&user_token={{ user_token }}';
					} else {
						$('.help-block, .alert').remove();
						$('div').removeClass('has-error has-success');

						checkErrors(json);
					}
				},
				error: function (jqXHR, textStatus, errorThrown) {
					console.log(textStatus);
				},
			} );
		} );
	} );
//--></script>
{{ footer }}