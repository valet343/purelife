{{ header }}
<div id="product-product" class="container product_{{ product_id }}">
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>
  <div class="columns">
    {{ column_left }}
    <div id="content" class="{{ class }}">
      {{ content_top }}
      <ul class="product_nav{% if fixed_nav_tabs %} fixed{% endif %}">
        <li class="active"><p class="tab-info">{{ tab_info }}</p></li>
        {% if description %}<li><p class="tab-description">{{ tab_description }}</p></li>{% endif %}
        {% if attribute_groups %}
        <li><p class="tab-specification">{{ tab_attribute }}</p></li>
        {% endif %}
        {% if video_status and video_tab and videos %}
        <li><p class="tab-video">{{ tab_video }} <span>{{ video_total }}</span></p></li>
        {% endif %}
        {% if review_status %}
        <li><p class="tab-review">{{ tab_review }}</p></li>
        {% endif %}
      </ul>
      <div class="tab-content" id="product">
        <div class="tab-pane active" id="tab-info">
          <div class="product_header">
            <div class="product_header_left">
              <div class="thumbnails{% if fixed_thumbnails %} fixed{% endif %}">
                <div class="thumbnails_main">
                  <div class="mySwiper2">
                    <div class="swiper-wrapper">
                      {% if thumb %}
                      <div class="swiper-slide">
                          <a {% if zoom_product %}data-fancybox="gallery"{% endif %} class="thumbnail zoom" href="{{ popup }}" title="{{ heading_title }}"><img src="{{ popup }}" title="{{ heading_title }}" alt="{{ heading_title }}" class="image_main" /></a>
                      </div>
                      {% endif %}
                      {% if images %}
                      {% for image in images %}
                      <div class="swiper-slide">
                        <a {% if zoom_product %}data-fancybox="gallery"{% endif %} class="thumbnail" href="{{ image.popup }}" title="{{ heading_title }}"><img src="{{ image.popup }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a>
                      </div>
                      {% endfor %}
                      {% endif %}
                      {% if video_additional %}
                      {% for video in videos %}
                      <div class="swiper-slide">
                        <a {% if zoom_product %}data-fancybox="gallery"{% endif %} class="thumbnail thumbnails_video video_icon" href="https://www.youtube.com/watch?v={{ video.video }}"><img src="https://img.youtube.com/vi/{{ video.video }}/maxresdefault.jpg" width="{{ poster_size_w }}" height="{{ poster_size_h }}" alt="{{ heading_title }}"></a>
                      </div>
                      {% endfor %}
                      {% endif %}
                    </div>
                  </div>
                  <div class="swiper_arrows thumbnails_arrows">
                    <div class="arrow arrow_prev"></div>
                    <div class="arrow arrow_next"></div>
                  </div>
                </div>
                <div thumbsSlider="" class="mySwiper thumbnails_additional">
                  <div class="swiper-wrapper">
                    {% if thumb %}
                    <div class="swiper-slide">
                        <img src="{{ thumb_small }}" title="{{ heading_title }}" alt="{{ heading_title }}" class="image_main" />
                    </div>
                    {% endif %}
                    {% if images %}
                    {% for image in images %}
                    <div class="swiper-slide">
                      <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" />
                    </div>
                    {% endfor %}
                    {% endif %}
                    {% if video_additional %}
                    {% for video in videos %}
                    <div class="swiper-slide video_icon">
                      <img src="https://img.youtube.com/vi/{{ video.video }}/default.jpg" width="{{ poster_additional_size_w }}" height="{{ poster_additional_size_h }}" alt="{{ heading_title }}">
                    </div>
                    {% endfor %}
                    {% endif %}
                  </div>
                </div>
                <script>
                  var swiper = new Swiper(".mySwiper", {
                    slidesPerView: "auto",
                    spaceBetween: 10,
                    freeMode: true,
                    watchSlidesProgress: true,
                  });
                  var swiper2 = new Swiper(".mySwiper2", {
                    navigation: {
                      nextEl: ".thumbnails_arrows .arrow_next",
                      prevEl: ".thumbnails_arrows .arrow_prev",
                    },
                    thumbs: {
                      swiper: swiper,
                    },
                  });
                </script>
              </div>
              {% if sticker_text_status %}
              <ul class="stickers_text">
                {% if sticker_new_status %}<li style="background: {{ sticker_new_background }}">{{ sticker_new_name }}</li>{% endif %}
                {% if sticker_special_status %}<li style="background: {{ sticker_special_background }}">{{ sticker_special_name }}</li>{% endif %}
                {% if sticker_sale_status %}<li style="background: {{ sticker_sale_background }}">{{ sticker_sale_name }}</li>{% endif %}
                {% if sticker_hot_status %}<li style="background: {{ sticker_hot_background }}">{{ sticker_hot_name }}</li>{% endif %}
              </ul>
              {% endif %}
              <div class="buttons_compare_wishlist">
                <button type="button" class="button_wishlist icon_wishlist" onclick="wishlist.add('{{ product_id }}');"></button>
                <button type="button" class="button_compare icon_compare" onclick="compare.add('{{ product_id }}');"></button>
              </div>
            </div>
            <div class="product_header_right">
              {% if model_status and model %}
                <div class="model">{{ text_model }} <span>{{ model }}</span><button onclick="copyToClipboard('.product_header_right .model span')" class="btn-copy copy_model"></button></div>
              {% endif %}
              <h1>{{ heading_title }}</h1>
              <div class="{{ class }}">
                <div class="info">
                  <ul>
                    {% if stock_status %}
                    <li class="stock{% if stock_status_id == 7 %} in{% elseif stock_status_id == 5 %} out{% elseif stock_status_id == 6 %} wait{% elseif stock_status_id == 8 %} pre{% endif %}">{{ stock }}</li>
                    {% endif %}
                    {% if sku_status and sku %}
                    <li>{{ text_sku }} {{ sku }}</li>
                    {% endif %}
                    {% if reward %}
                    <li class="info_reward">{{ text_reward }} <u>{{ reward }}</u></li>
                    {% endif %}
                    {% if purchased_status == 1 or purchased_status == 2 and purchased_count >= 1 %}
                    <li>{{ text_purchased }} {{ purchased_count }} {{ text_purchased_psc }}</li>
                    {% endif %}
                    {% if view_status %}
                    <li>{{ text_view }} {{ view }}</li>
                    {% endif %}
                  </ul>
                  {% if manufacturer %}
                    {% if (manufacturers_img) %} 
                    <span class="manufacturer"><a href="{{ manufacturers }}">{{ manufacturers_img ? '<img src="'~manufacturers_img~'" title="'~manufacturer~'" />' : '' }} {{ manufacturer }}</a></span>
                    {% else %} 
                    <span class="manufacturer"><a href="{{ manufacturers }}">{{ manufacturer }}</a></span>
                    {% endif %}
                  {% endif %}
                </div>
                <div class="price_buttons{% if minimum > 1 %} minimum{% endif %}">
                  {% if price %}
                    <div class="price">
                      {% if not special %}
                      <div class="price-stock">{{ price }}</div>
                      {% else %}
                      {% if special_percent %}
                        {% if special_price_type == 'percent' %}
                        <div class="percent">-{{ special_percent }}%</div>
                        {% else %}
                        <div class="cost">-{{ special_percent }}</div>
                        {% endif %}
                      {% endif %}
                      <div class="price-old">{{ price }}</div>
                      <div class="price-stock price-new">{{ special }}</div>
                      {% endif %}
                    </div>
                    <div class="quantity">
                      <button class="btn" data-dir="dwn">-</button>
                      <input type="text" name="quantity" value="{{ minimum }}" id="input-quantity" class="form-control" />
                      <button class="btn" data-dir="up">+</button>
                    </div>
                    <input type="hidden" name="product_id" value="{{ product_id }}" />
                    <div class="buttons">
                      <button type="button" id="button-cart" class="btn btn-cart{% if out_of_stock and button_cart_status %} out_of_stock{% endif %}">{{ button_cart }}</button>
                      {% if buyoneclick_status_product %}
                        <button type="button" id="button-fast-checkout" class="btn boc_order_btn" {% if (buyoneclick_google_status and buyoneclick_google_category_btn is defined and buyoneclick_google_category_btn != '' and buyoneclick_google_action_btn is defined and buyoneclick_google_action_btn != '') %} onClick="clickAnalytics(); return true;" {% endif %} data-target="#boc_order" data-product="{{ heading_title }}" data-product_id="{{ product_id }}"></button>
                      {% endif %}
                    </div>
                  {% endif %}
                </div>
                {% if points or tax or discounts %}
                <ul class="price_info">
                  {% if points %}
                  <li>{{ text_points }} {{ points }}</li>
                  {% endif %}
                  {% if tax %}
                  <li>{{ text_tax }} {{ tax }}</li>
                  {% endif %}
                  {% if discounts %}
                  <li>
                    <ul>
                    {% for discount in discounts %}
                      <li>{{ discount.quantity }}{{ text_discount }}{{ discount.price }}</li>
                    {% endfor %}
                    </ul>
                  </li>
                  {% endif %}
                </ul>
                {% endif %}
                {% if minimum > 1 %}
                <div class="alert-minimum">{{ text_minimum }}</div>
                {% endif %}
                <button type="button" id="button-found-cheaper-modal">{{ text_found_cheaper }}</button>
                {% if options %}
                <div class="options">
                <h3>{{ text_option }}</h3>
                {% for option in options %}
                {% if option.type == 'select' %}
                <div class="form-group form-group-select{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}">
                    <select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control">
                      <option value="">{{ text_select }}</option>
                      {% for option_value in option.product_option_value %}
                      <option value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}">{{ option_value.name }}
                      {% if option_value.price %}
                      ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                      {% endif %} </option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'radio' %}
                <div class="form-group form-group-radio form-group-rc{% if option.required %} required {% endif %}">
                  <label class="control-label">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}"> {% for option_value in option.product_option_value %}
                      <label class="radio">
                        <input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" id="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}" />
                        {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                        <label for="{{ option_value.product_option_value_id }}" class="dc_label"></label>
                        {{ option_value.name }}
                        {% if option_value.price %}
                        ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                        {% endif %}
                      </label>
                    {% endfor %}
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'checkbox' %}
                <div class="form-group form-group-checkbox form-group-rc{% if option.required %} required {% endif %}">
                  <label class="control-label">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}">
                    {% for option_value in option.product_option_value %}
                    <label class="checkbox">
                      <input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" id="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}" />
                      {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                      <label for="{{ option_value.product_option_value_id }}" class="dc_label"></label>
                      {{ option_value.name }}
                      {% if option_value.price %}
                      ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                      {% endif %}
                    </label>
                    {% endfor %}
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'text' %}
                <div class="form-group form-group-text{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}">
                    <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" />
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'textarea' %}
                <div class="form-group form-group-textarea{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}">
                    <textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'file' %}
                <div class="form-group form-group-file{% if option.required %} required {% endif %}">
                  <label class="control-label">{{ option.name }}</label>
                  <div id="input-option{{ option.product_option_id }}">
                    <button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
                    <input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}" />
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'date' %}
                <div class="form-group form-group-date{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div class="input-group date">
                    <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}" class="form-control" />
                    <span class="input-group-btn">
                    <button class="btn btn-grey btn-date" type="button"></button>
                    </span>
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'datetime' %}
                <div class="form-group form-group-datetime{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div class="input-group datetime">
                    <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
                    <span class="input-group-btn">
                    <button type="button" class="btn btn-grey btn-date"></button>
                    </span>
                  </div>
                </div>
                {% endif %}
                {% if option.type == 'time' %}
                <div class="form-group form-group-time{% if option.required %} required {% endif %}">
                  <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                  <div class="input-group time">
                    <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
                    <span class="input-group-btn">
                    <button type="button" class="btn btn-grey btn-date"></button>
                    </span>
                  </div>
                </div>
                {% endif %}
                {% endfor %}
                </div>
                {% endif %}
                {% if recurrings %}
                <h3>{{ text_payment_recurring }}</h3>
                <div class="form-group required">
                  <select name="recurring_id" class="form-control">
                    <option value="">{{ text_select }}</option>
                    {% for recurring in recurrings %}
                    <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                    {% endfor %}
                  </select>
                  <div class="help-block" id="recurring-description"></div>
                </div>
                {% endif %}
                {% if review_status %}
                <div class="rating">
                  {% for i in 1..5 %}
                    {% if rating < i %}
                    <span></span>
                    {% else %}
                    <span class="active"></span>
                    {% endif %}
                    {% endfor %}
                    <p>{{ reviews }}</p>
                    <u>{{ text_write }}</u>
                </div>
                {% endif %}
                <div class="info_spg">
                  {% if shipping_status and shipping_description %}
                  <div class="item shipping">
                    <div class="caption">
                      <span>{{ tab_shipping }}</span>{{ shipping_description }}
                      {% if shipping_items %}
                      <ul>
                      {% for shipping_item in shipping_items %}
                        <li>
                          <img src="{{ shipping_item.image }}" alt="{{ shipping_item.title }}" />
                          {% if shipping_item.title %}<span>{{ shipping_item.title }}</span>{% endif %}
                        </li>
                      {% endfor %}
                      </ul>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if payment_status and payment_description %}
                  <div class="item payment">
                    <div class="caption">
                      <span>{{ tab_payment }}</span>{{ payment_description }}
                      {% if payment_items %}
                      <ul>
                      {% for payment_item in payment_items %}
                        <li>
                          <img src="{{ payment_item.image }}" alt="{{ payment_item.title }}" />
                          {% if payment_item.title %}<span>{{ payment_item.title }}</span>{% endif %}
                        </li>
                      {% endfor %}
                      </ul>
                      {% endif %}
                    </div>
                  </div>
                  {% endif %}
                  {% if guarantee_status and guarantee_description %}
                  <div class="item guarantee">
                    <div class="caption">
                      <span>{{ tab_guarantee }}</span>{{ guarantee_description }}
                    </div>
                  </div>
                  {% endif %}
                </div>
                {% if edges_items %}
                <div class="edges">
                  {% for edges_item in edges_items %}
                  <div class="item">
                    <span><img src="{{ edges_item.image }}" alt="{{ edges_item.title }}" /></span>
                    <p>{{ edges_item.title }}</p>
                  </div>
                  {% endfor %}
                </div>
                {% endif %}
                {% if tags %}
                <div class="tags">
                  <span>{{ text_tags }}</span>
                  {% for i in 0..tags|length - 1 %}
                  {% if i < (tags|length - 1) %}
                  <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>,
                  {% else %}
                  <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>
                  {% endif %}
                  {% endfor %}
                </div>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
        <div class="product_middle">
          <div class="product_middle_left">
            {% if products %}
            <div class="tab-pane" id="tab-related">
              <div class="tab-pane_title">
                <h3>{{ text_related }} {{ heading_title }}</h3>
                <div class="swiper_arrows swiper_arrows_products{% if products_type == 'slider' and products_slider_arrows %} swiper_arrows_products_active{% endif%}" id="products_items_slider_arrows_related">
                  <div class="arrow arrow_prev"></div>
                  <div class="arrow arrow_next"></div>
                </div>
              </div>
              {% if products_type == 'slider' %}<div class="swiper-pagination" id="products_items_slider_pagination_related"></div>{% endif %}
              <div class="products_items{% if products_type == 'slider' %} products_items_slider{% endif%}" id="products_items_slider_related">
                {% if products_type == 'slider' %}<div class="swiper-wrapper">{% endif %}
                  {% for product in products %}
                  <div class="{% if products_type == 'slider'%}swiper-slide {% endif%}item product_{{ product.id }}">
                    <div class="image">
                      <a href="{{ product.href }}">
                        <img class="image_main" src="{{ product.thumb }}" alt="{{ product.name }}" title="{{ product.name }}" />
                        {% if product.thumb2 %}<img class="image_hover" src="{{ product.thumb2 }}" alt="{{ product.name }}" title="{{ product.name }}" />{% endif %}
                      </a>
                      {% if catalog_stickers_text %}
                      <ul class="stickers_text">
                        {% if product.sticker_new_status %}<li style="background: {{ sticker_new_background }}">{{ sticker_new_name }}</li>{% endif %}
                        {% if product.sticker_special_status %}<li style="background: {{ sticker_special_background }}">{{ sticker_special_name }}</li>{% endif %}
                        {% if product.sticker_sale_status %}<li style="background: {{ sticker_sale_background }}">{{ sticker_sale_name }}</li>{% endif %}
                        {% if product.sticker_hot_status %}<li style="background: {{ sticker_hot_background }}">{{ sticker_hot_name }}</li>{% endif %}
                      </ul>
                      {% endif %}
                      <div class="buttons_compare_wishlist">
                        <button type="button" class="button_wishlist icon_wishlist" onclick="wishlist.add('{{ product.product_id }}');"></button>
                        <button type="button" class="button_compare icon_compare" onclick="compare.add('{{ product.product_id }}');"></button>
                        <button type="button" class="button_view_modal icon_view_modal"></button>
                        {% if buyoneclick_status_module %}
                          <button type="button" class="button_fast_checkout icon_fast_checkout" {% if (buyoneclick_google_status and buyoneclick_google_category_btn is defined and buyoneclick_google_category_btn != '' and buyoneclick_google_action_btn is defined and buyoneclick_google_action_btn != '') %} onClick="clickAnalytics(); return true;" {% endif %} data-target="#boc_order" data-product="{{ product['name'] }}" data-product_id="{{ product['product_id'] }}"></button>
                        {% endif %}
                      </div>
                      {% if product.special %}
                      <div class="percent">-{{ product.special_percent }}%</div>
                      {% endif %}
                    </div>
                    <div class="caption">
                      <div class="name"><a href="{{ product.href }}">{{ product.name }}</a></div>
                      {% if product.description and catalog_description %}<p class="description">{{ product.description }}</p>{% endif %}
                      <div class="additional">
                        <div class="rating">
                          {% for i in 1..5 %}
                            {% if product.rating < i %}
                            <span></span>
                            {% else %}
                            <span class="active"></span>
                            {% endif %}
                          {% endfor %}
                          <p>{{ product.reviews }}</p>
                        </div>
                        {% if product.model and catalog_model %}
                        <p class="model">{{ product.model }}</p>
                        {% endif %}
                        {% if product.stock and catalog_stock %}
                        <div class="stock{% if product.stock_status_id == 7 %} in{% elseif product.stock_status_id == 5 %} out{% elseif product.stock_status_id == 6 %} wait{% elseif product.stock_status_id == 8 %} pre{% endif %}">{{ product.stock }}</div>
                        {% endif %}
                      </div>
                      <div class="price_button">
                        {% if product.price %}
                        <div class="price">
                          {% if not product.special %}
                          <div class="price-stock">{{ product.price }}</div>
                          {% else %}
                          <div class="price-old">{{ product.price }}</div>
                          <div class="price-stock price-new">{{ product.special }}</div>
                          {% endif %}
                        </div>
                        {% endif %}
                        <button class="btn icon_cart{% if product.out_of_stock and catalog_button_cart %} out_of_stock{% endif %}" type="button" onclick="cart.add('{{ product.product_id }}');"></button>
                      </div>
                      <div class="hover_block">
                        {% if product.attribute_groups and catalog_attribute_groups %}
                        <ul class="attribute_groups">
                          {% for attribute_group in product.attribute_groups %}
                          {% for attribute in attribute_group.attribute|slice(0, 2) %}
                          <li>
                            <b>{{ attribute.name }}:</b>
                            {% if attribute.text|length > 90 %}
                              {{ attribute.text|slice(0, 90) ~ '...' }}
                            {% else %}
                              {{ attribute.text }}
                            {% endif %}
                          </li>
                          {% endfor %}
                          {% endfor %}
                        </ul>
                        {% endif %}
                      </div>
                    </div>
                  </div>
                  {% endfor %}
                {% if products_type == 'slider' %}</div>{% endif %}
              </div>
              {% if products_type == 'slider' %}
              <script>
                // Проверка на наличие блока в Aside
                if($("#products_items_slider_related").parent().parent().attr("id") != 'column-left') {
                  var swiperrelated = new Swiper("#products_items_slider_related", {
                    lazy: true,
                    loop: true,
                    navigation: {
                      nextEl: "#products_items_slider_arrows_related .arrow_next",
                      prevEl: "#products_items_slider_arrows_related .arrow_prev",
                    },
                    pagination: {
                      el: "#products_items_slider_pagination_related",
                      type: "progressbar",
                    },
                    breakpoints: {
                      320: {
                        slidesPerView: {{ products_slider_limit_xs }},
                        spaceBetween: 10,
                      },
                      480: {
                        slidesPerView: {{ products_slider_limit_sm }},
                        spaceBetween: 10,
                      },
                      768: {
                        slidesPerView: {{ products_slider_limit_md }},
                        spaceBetween: 10,
                      },
                      1024: {
                        slidesPerView: {{ products_slider_limit_lg }},
                        spaceBetween: 10,
                      },
                      1280: {
                        slidesPerView: {{ products_slider_limit_xl }},
                        spaceBetween: 10,
                      },
                      1440: {
                        slidesPerView: {{ products_slider_limit }},
                        spaceBetween: 10,
                      }
                    }
                  });
                } else {
                  var swiperrelatedAside = new Swiper("#products_items_slider_related", {
                    lazy: true,
                    loop: true,
                    navigation: {
                      nextEl: "#products_items_slider_arrows_related .arrow_next",
                      prevEl: "#products_items_slider_arrows_related .arrow_prev",
                    },
                    slidesPerView: 1,
                    spaceBetween: 10,
                  });
                }
              </script>
              {% endif %}
            </div>
            {% endif %}
            {% if description %}
            <div class="tab-pane" id="tab-description">
              <h3>{{ text_description }} {{ heading_title }}</h3>
              <div class="description_tags">{{ description }}</div>
            </div>
            {% endif %}
            {% if attribute_groups %}
            <div class="tab-pane" id="tab-specification">
              <h3>{{ text_specification }} {{ heading_title }}</h3>
              <div class="attribute_groups">
              {% for attribute_group in attribute_groups %}
              <p>{{ attribute_group.name }}</p>
              {% for attribute in attribute_group.attribute %}
              <div class="item">
                <div class="name">{{ attribute.name }}</div>
                <div class="text">{{ attribute.text }}</div>
              </div>
              {% endfor %}
              {% endfor %}
              </div>
            </div>
            {% endif %}
            {% if video_status and video_tab and videos %}
            <div class="tab-pane" id="tab-video">
              <h3>{{ text_video_tab }} {{ heading_title }}</h3>
              {% if video_status and videos %}
              <div class="videos">
                {% for video in videos %}
                <div class="video">
                  <div class="embed-youtube" data-id="{{ video.video }}" data-autoplay="1" width="100%"></div>
                </div>
                {% endfor %}
              </div>
              {% endif %}
            </div>
            {% endif %}
            {% if review_status %}
            <div class="tab-pane" id="tab-review">
              <form class="form-horizontal" id="form-review">
                <h3>{{ text_review }} {{ heading_title }}</h3>
                <div id="review"></div>
                <h3>{{ text_write_tab }} {{ heading_title }}</h3>
                {% if review_guest %}
                <div class="form-group required">
                  <div class="col-sm-12">
                    <!-- <label class="control-label" for="input-name">{{ entry_name }}</label> -->
                    <input type="text" name="name" value="{{ customer_name }}" id="input-name" class="form-control" placeholder="{{ entry_name }}" />
                  </div>
                </div>
                <div class="form-group required">
                  <div class="col-sm-12">
                    <!-- <label class="control-label" for="input-review">{{ entry_review }}</label> -->
                    <textarea name="text" rows="5" id="input-review" class="form-control" placeholder="{{ entry_review }}"></textarea>
                    <!-- <div class="help-block">{{ text_note }}</div> -->
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-12">
                    <!-- <label class="control-label" for="input-plus">{{ entry_plus }}</label> -->
                    <textarea name="plus" rows="3" id="input-plus" class="form-control" placeholder="{{ entry_plus }}"></textarea>
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-sm-12">
                    <!-- <label class="control-label" for="input-minus">{{ entry_minus }}</label> -->
                    <textarea name="minus" rows="3" id="input-minus" class="form-control" placeholder="{{ entry_minus }}"></textarea>
                  </div>
                </div>
                <div class="form-group required">
                    <label class="control-label">{{ entry_rating }}</label>
                    <div class="rating">
                      <input type="radio" id="rating_1" name="rating" value="1" />
                      <label class="radio_label" for="rating_1"></label>
                      <input type="radio" id="rating_2" name="rating" value="2" />
                      <label class="radio_label" for="rating_2"></label>
                      <input type="radio" id="rating_3" name="rating" value="3" />
                      <label class="radio_label" for="rating_3"></label>
                      <input type="radio" id="rating_4" name="rating" value="4" />
                      <label class="radio_label" for="rating_4"></label>
                      <input type="radio" id="rating_5" name="rating" value="5" />
                      <label class="radio_label" for="rating_5"></label>
                    </div>
                </div>
                {{ captcha }}
                <div class="buttons clearfix">
                  <div class="pull-right">
                    <button type="button" id="button-review" class="btn btn-primary">{{ button_continue }}</button>
                  </div>
                </div>
                {% else %}
                {{ text_login }}
                {% endif %}
              </form>
            </div>
            {% endif %}
          </div>
          <div class="product_middle_right">
            <div class="product_mini">
              {% if sticker_text_status %}
              <ul class="stickers_text">
                {% if sticker_new_status %}<li style="background: {{ sticker_new_background }}">{{ sticker_new_name }}</li>{% endif %}
                {% if sticker_special_status %}<li style="background: {{ sticker_special_background }}">{{ sticker_special_name }}</li>{% endif %}
                {% if sticker_sale_status %}<li style="background: {{ sticker_sale_background }}">{{ sticker_sale_name }}</li>{% endif %}
                {% if sticker_hot_status %}<li style="background: {{ sticker_hot_background }}">{{ sticker_hot_name }}</li>{% endif %}
              </ul>
              {% endif %}
              <div class="buttons_compare_wishlist">
                <button type="button" class="button_wishlist icon_wishlist" onclick="wishlist.add('{{ product_id }}');"></button>
                <button type="button" class="button_compare icon_compare" onclick="compare.add('{{ product_id }}');"></button>
              </div>
              <img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" />
              <div class="caption">
                <div class="name"><p>{{ heading_title }}</p></div>
                <div class="price_buttons">
                  {% if price %}
                    <div class="price{% if special_price_type != 'percent' %} price_column{% endif %}">
                      {% if not special %}
                      <div class="price-stock">{{ price }}</div>
                      {% else %}
                      {% if special_percent %}
                        {% if special_price_type == 'percent' %}
                          <div class="percent">-{{ special_percent }}%</div>
                        {% else %}
                          <div class="cost">-{{ special_percent }}</div>
                        {% endif %}
                      {% endif %}
                      <div class="price_right">
                        <div class="price-old">{{ price }}</div>
                        <div class="price-stock price-new">{{ special }}</div>
                      </div>
                      {% endif %}
                    </div>
                    <button type="button" id="button-cart-mini" class="btn btn-cart{% if out_of_stock and button_cart_status %} out_of_stock{% endif %}"></button>
                    <!-- <div class="buttons">
                      <div class="quantity">
                        <button class="btn" data-dir="dwn">-</button>
                        <input type="text" name="quantity" value="{{ minimum }}" id="input-quantity" class="form-control" />
                        <button class="btn" data-dir="up">+</button>
                      </div>
                    </div> -->
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        </div>
        {% if product_bottom_bar %}
        <div class="product_bar">
          {% if price %}
          <div class="price">
            {% if not special %}
            <div class="price-stock">{{ price }}</div>
            {% else %}
            <!-- {% if special_percent %}<div class="percent">-{{ special_percent }}%</div>{% endif %} -->
            <span>
              <div class="price-old">{{ price }}</div>
              <div class="price-stock price-new">{{ special }}</div>
            </span>
            {% endif %}
          </div>
          {% endif %}
          <button type="button" id="button-cart-bar" class="btn btn-cart{% if out_of_stock and button_cart_status %} out_of_stock{% endif %}"></button>
        </div>
        <script>
        $(document).ready(function() {
          if($(window).width() <= 1100) {
            $(window).scroll(function() {
              if($(this).scrollTop() > 1200) {
                $(".product_bar").addClass("active");
              } else {
                $(".product_bar").removeClass("active");
              }
            })
          }
        })
        </script>
        {% endif %}
      </div>
  </div>
  {{ column_right }}
  </div>
{{ content_bottom }}
</div>
<script>
  // Записываем отступ 
  if($(window).width() <= 1100) {
    // Mob
    var pxOffset = 96
  } else {
    // PC
    var pxOffset = 48
  }
  // Нажатие по пункту в Nav - баре с переездом к блоку с контекнтом
  $(".product_nav li p").on("click", function() {
    $(".product_nav li").removeClass("active");
    $(this).parent().addClass("active");
    var idClicked = $(this).attr("class");
    if(idClicked == "tab-info") {
      $('html, body').animate({
        scrollTop: $("#" + idClicked).offset().top - 200
      }, 1500);
    } else {
      $('html, body').animate({
        scrollTop: $("#" + idClicked).offset().top - pxOffset
      }, 1500);  
    }  
  });
  // Отправить к написанию отзыва
  $(".rating u").on('click', function() {
    $('html, body').animate({
      scrollTop: $("#tab-review").offset().top - pxOffset
    }, 1500);
  })
</script>
<script type="text/javascript"><!--
$('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){
	$.ajax({
		url: 'index.php?route=product/product/getRecurringDescription',
		type: 'post',
		data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
		dataType: 'json',
		beforeSend: function() {
			$('#recurring-description').html('');
		},
		success: function(json) {
			$('.alert-dismissible, .text-danger').remove();

			if (json['success']) {
				$('#recurring-description').html(json['success']);
			}
		}
	});
});
//--></script> 
<script type="text/javascript"><!--
$('#button-cart, #button-cart-mini, #button-cart-bar').on('click', function() {
	$.ajax({
		url: 'index.php?route=checkout/cart/add',
		type: 'post',
		data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
		dataType: 'json',
		beforeSend: function() {
			// $('#button-cart, #button-cart-mini, #button-cart-bar').button('loading');
		},
		complete: function() {
			$('#button-cart, #button-cart-mini, #button-cart-bar').button('reset');
		},
		success: function(json) {
			$('.alert-dismissible, .text-danger').remove();
			$('.form-group').removeClass('has-error');

			if (json['error']) {
				if (json['error']['option']) {
					for (e in json['error']['option']) {

            if($('.alert-item-modal-push').length < 1) {
              $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
            }
            if($('.alert-item').length = 6) {
              $('.alert-item').eq(5).prevAll(".alert-item").remove();
            }
            var $alertItem = $('<li class="alert-item alert-error alert-item-error"><span class="alert-icon"></span><p>' + json['error']['option'][e] + '</p><button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
            $(".alert-item-modal-push").prepend($alertItem);
            setTimeout(function() {
                $(".alert-item.alert-error").remove();
            }, 2400);

						// var element = $('#input-option' + e.replace('_', '-'));

						// if (element.parent().hasClass('input-group')) {
						// 	element.parent().after('<div class="text-danger">' + json['error']['option'][e] + '</div>');
						// } else {
						// 	element.after('<div class="text-danger">' + json['error']['option'][e] + '</div>');
						// }
					}
				}

				if (json['error']['recurring']) {
					$('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
				}

				// Highlight any found errors
				$('.text-danger').parent().addClass('has-error');

			}

      if (json['success']) {
          setTimeout(function () {
            $('#cart-total > p').text(json['text_items_sum']);
            $('#cart-total > span').text(json['text_items_count']);
            $('.cart_count').text(json['text_items_count']);
          }, 100);
          if (json['cart_alert_type'] == "modal") {
            $('.dropdown-bg').addClass("active");
            $('body').append('<div class="alert-modal alert-item-modal"><h3>' + json['title'] + '</h3><div class="caption"><p>' + json['success'] + '</p></div><ul class="buttons"><button class="btn btn-gray btn-close-alert-modal">' + json["text_continue"] + '</button><a class="btn" href="' + json["link_checkout"] + '">' + json["text_checkout"] + '</a></ul><button class="btn-close btn-close-alert-modal"></button></div>');
          } else {
            if($('.alert-item-modal-push').length < 1) {
              $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
            }
            if($('.alert-item').length = 6) {
              $('.alert-item').eq(5).prevAll(".alert-item").remove();
            }
            var $alertItem = $('<li class="alert-item alert-success">' + '<img src=" ' + $(".product_" + {{ product_id }} + " .image_main").attr("src") + ' "/><p>' + json['success'] + '</p><button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
            $(".alert-item-modal-push").prepend($alertItem);
            setTimeout(function() {
                $alertItem.remove();
            }, 2400);
          }

          $('#cart > ul > span').load('index.php?route=common/cart/info ul li');
        }

        $(".btn-close-alert-modal, .dropdown-bg").on("click", function() {
          $(".alert-modal").remove();
          $('.dropdown-bg').removeClass("active");
        });

		},
    error: function(xhr, ajaxOptions, thrownError) {
        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
    }
	});
});
//--></script>
<script type="text/javascript"><!--
$('.date').datetimepicker({
	language: '{{ datepicker }}',
	pickTime: false
});

$('.datetime').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: true,
	pickTime: true
});

$('.time').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: false
});

$('button[id^=\'button-upload\']').on('click', function() {
	var node = this;

	$('#form-upload').remove();

	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

	$('#form-upload input[name=\'file\']').trigger('click');

	if (typeof timer != 'undefined') {
    	clearInterval(timer);
	}

	timer = setInterval(function() {
		if ($('#form-upload input[name=\'file\']').val() != '') {
			clearInterval(timer);

			$.ajax({
				url: 'index.php?route=tool/upload',
				type: 'post',
				dataType: 'json',
				data: new FormData($('#form-upload')[0]),
				cache: false,
				contentType: false,
				processData: false,
				beforeSend: function() {
					$(node).button('loading');
				},
				complete: function() {
					$(node).button('reset');
				},
				success: function(json) {
					$('.text-danger').remove();

					if (json['error']) {
						$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
					}

					if (json['success']) {
						alert(json['success']);

						$(node).parent().find('input').val(json['code']);
					}
				},
				error: function(xhr, ajaxOptions, thrownError) {
					alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
				}
			});
		}
	}, 500);
});
//--></script>
{% if not zoom_product %}
<script>
  $(document).ready(function() {
    $('.thumbnails').magnificPopup({
      type:'image',
      delegate: 'a',
      gallery: {
        enabled: true
      }
    });
  });
</script>
{% endif %}
<script type="text/javascript"><!--
// Звезды при добавления рейтинга
$("#form-review label.radio_label").mouseenter(function(){
  $(this).prevAll("label").andSelf().addClass('hover');
  $(this).nextAll("label").removeClass('hover');
});
$("#form-review label.radio_label").mouseout(function(){
  $("#form-review label.radio_label").removeClass('hover'); 
});
$("#form-review label.radio_label").click(function(){
  $(this).prevAll("label").andSelf().addClass('active hover');
  $(this).nextAll("label").removeClass('active hover');
});

$('#review').delegate('.pagination a', 'click', function(e) {
    e.preventDefault();

    $('#review').fadeOut('slow');

    $('#review').load(this.href);

    $('#review').fadeIn('slow');
});

$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

$('#button-review').on('click', function() {
	$.ajax({
		url: 'index.php?route=product/product/write&product_id={{ product_id }}',
		type: 'post',
		dataType: 'json',
		data: $("#form-review").serialize(),
		beforeSend: function() {
			// $('#button-review').button('loading');
		},
		complete: function() {
			$('#button-review').button('reset');
		},
		success: function(json) {
			$('.alert-dismissible').remove();

			if (json['error']) {
        if($('.alert-item-modal-push').length < 1) {
          $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
        }
        if($('.alert-item').length = 6) {
          $('.alert-item').eq(5).prevAll(".alert-item").remove();
        }
        var $alertItem = $('<li class="alert-item alert-error alert-item-error"><span class="alert-icon"></span>' + json['error'] + '<button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
        $(".alert-item-modal-push").prepend($alertItem);
        setTimeout(function() {
            $alertItem.remove();
        }, 2400);
			}

			if (json['success']) {
        if($('.alert-item-modal-push').length < 1) {
          $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
        }
        if($('.alert-item').length = 6) {
          $('.alert-item').eq(5).prevAll(".alert-item").remove();
        }
        var $alertItem = $('<li class="alert-item alert-success alert-item-success"><span class="alert-icon"></span>' + json['success'] + '<button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
        $(".alert-item-modal-push").prepend($alertItem);
        setTimeout(function() {
            $alertItem.remove();
        }, 2400);

				$('input[name=\'name\']').val('');
				$('textarea[name=\'text\']').val('');
				$('input[name=\'rating\']:checked').prop('checked', false);
        $('.radio_label').removeClass('active');
			}

      $(".btn-close-alert-modal, .dropdown-bg").on("click", function() {
        $(".alert-modal").remove();
        $('.dropdown-bg').removeClass("active");
      });

		}
	});
});
//--></script>
<script type="text/javascript"><!--
var counter = {{ minimum }};
var min = {{ minimum }};
$(document).on('click', '.quantity button', function () {    
  var btn = $(this),
    oldValue = btn.closest('.quantity').find('input').val().trim(),
    newVal = min;
      
  if (btn.attr('data-dir') == 'up') {
    newVal = parseInt(oldValue) + counter;
  } else {
    if (oldValue > min) {
      newVal = parseInt(oldValue) - counter;
    } else {
      newVal = min;
    }
  }
  btn.closest('.quantity').find('input').val(newVal);
});
//--></script>
<!-- dc_admin_autocalc_price_option -->
<script type="text/javascript"><!--
function price_format(price) { 
c={{ autocalc_currency.decimals }};d='{{ autocalc_currency.decimal_point }}';t='{{ autocalc_currency.thousand_point }}';sl='{{ autocalc_currency.symbol_left }}';sr='{{ autocalc_currency.symbol_right }}';n=price*{{ autocalc_currency.value }};i=parseInt(n=Math.abs(n).toFixed(c))+''; j=((j=i.length)>3)?j%3:0;price_text=sl+(j?i.substr(0,j)+t:'')+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):'')+sr;{% if autocalc_currency2 %}c={{ autocalc_currency2.decimals }};d='{{ autocalc_currency2.decimal_point }}';t='{{ autocalc_currency2.thousand_point }}';sl='{{ autocalc_currency2.symbol_left }}';sr='{{ autocalc_currency2.symbol_right }}';n=price*{{ autocalc_currency2.value }};i=parseInt(n=Math.abs(n).toFixed(c))+''; j=((j=i.length)>3)?j%3:0; price_text+='  <span class="currency2">(' + sl+(j?i.substr(0,j)+t:'')+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):'')+sr + ')</span>';{% endif %}return price_text;
}
function points_format(v) {
return v.toFixed(0);
}
function process_discounts(price, quantity) {
{% for discounts in discounts_raw %}if(quantity>={{ discounts.quantity }}){price={{ discounts.price }};}{% endfor %}return price;
}
function calculate_tax(price) {
var p=price;{% for tax_rate in tax_rates %}{% if tax_rate.type == 'F' %}p+={{ tax_rate.rate }};{% endif %}{% if tax_rate.type == 'P' %}p+=price*{{ tax_rate.rate / 100.0 }};{% endif %}{% endfor %}return p;
}
function autocalc_aap(s,p,ff){$(s).each(function(){var $t=$(this);$({value:$t.data('value')||0}).animate({value:p},{easing:'swing',duration:500,step:function(value){$t.html(ff(value));$t.data('value',value);}});});}
function recalculateprice() {
    var main_price = {{ apo_price_value + 0.0 }};
    var special = {{ apo_special_value + 0.0 }};
    var input_quantity = Number($('#product input[name="quantity"]').val()) || 1;
    var discount_coefficient = 1;
    var option_price = 0;
    var discount_quantity = 0;
    
    $('#product .owq-option input[type="checkbox"]').each(function() {
        $qty = $(this).closest('tr').find('.owq-input');
        if ($(this).data('split')=='/') discount_quantity += Number($qty.val()) || 0;
    });    
    if (discount_quantity == 0) discount_quantity = input_quantity;
    
    {% if special %}
    special_coefficient = {{ apo_price_value / apo_special_value }};
    {% else %}
    {% if autocalc_option_discount %}
    if (main_price) discount_coefficient = process_discounts(main_price, discount_quantity) / main_price;
    {% else %}
    main_price = process_discounts(main_price, discount_quantity);
    {% endif %}
    {% endif %}
    
    {% if points %}
    var points = {{ apo_points_value }};
    $('#product input:checked,#product option:selected').each(function() {
        if ($(this).data('points')) points += Number($(this).data('points'));
    });
    autocalc_aap('.autocalc-product-points', points, points_format);
    {% endif %}
    
    $('#product input:checked,#product option:selected').each(function() {
    if ($(this).data('prefix') == '=') {
        option_price += Number($(this).data('price'));
        main_price = 0;
        special = 0;
    }
    });
    
    $('#product input:checked,#product option:selected').each(function() {
    if ($(this).data('prefix') == '+') {
        option_price += Number($(this).data('price'));
    }
    if ($(this).data('prefix') == '-') {
        option_price -= Number($(this).data('price'));
    }
    if ($(this).data('prefix') == '%') {
        pcnt = 1.0 + (Number($(this).data('price')) / 100.0);
        option_price *= pcnt;
        main_price *= pcnt;
        special *= pcnt;
    }
    if ($(this).data('prefix') == '*') {
        option_price *= Number($(this).data('price'));
        main_price *= Number($(this).data('price'));
        special *= Number($(this).data('price'));
    }
    if ($(this).data('prefix') == '/') {
        option_price /= Number($(this).data('price'));
        main_price /= Number($(this).data('price'));
        special /= Number($(this).data('price'));
    }
    });
    
    special += option_price;
    main_price += option_price;

    {% if special %}
    {% if autocalc_option_special %}
    special = main_price / special_coefficient;
    {% else %}
    main_price = special * special_coefficient;
    {% endif %}
    tax = special;
    {% else %}
    {% if autocalc_option_discount %}
    main_price *= discount_coefficient;
    {% endif %}
    tax = main_price;
    {% endif %}
    
    {% if tax %}
    main_price = calculate_tax(main_price);
    {% if special %}
    special = calculate_tax(special);
    {% endif %}
    {% endif %}
    
    {% if not autocalc_not_mul_qty %}
    if (input_quantity > 0) {
        main_price *= input_quantity;
        special *= input_quantity;
        {% if tax %}tax *= input_quantity;{% endif %}
    }
    {% endif %}
    
    autocalc_aap('.autocalc-product-price', main_price, price_format);
    {% if special %}autocalc_aap('.autocalc-product-special', special, price_format);{% endif %}
    {% if tax %}autocalc_aap('.autocalc-product-tax', tax, price_format);{% endif %}
}

$(document).ready(function() {
    $('#product input[type="checkbox"],#product input[type="radio"],#product select').each(function(){if($(this).data('autocalc'))return;$(this).data('autocalc',1).on('change',function(){recalculateprice();});});    
    $('#product input[name="quantity"]').each(function(){if($(this).data('autocalc'))return;var $q=$(this);$q.data('autocalc',1).data('val',$q.val());(function(){if($q.val()!=$q.data('val')){$q.data('val',$q.val());recalculateprice();}setTimeout(arguments.callee,250);})();});
    
    {% if autocalc_select_first %}
    $('#product select[name^="option"] option[value=""]').remove();
    last_name='';$('#product input[type="radio"][name^="option"]').each(function(){if($(this).attr('name')!=last_name)$(this).prop('checked',true);last_name=$(this).attr('name');});
    {% endif %}
    
    recalculateprice();
});
//--></script>
{% if found_cheaper_status %}
<div class="alert-modal-hidden alert-modal alert-item-modal" id="modal_found_cheaper">
  <h3>{{ text_found_cheaper }}</h3>
  <form id="form-found-cheaper">
    <input name="product_id" type="hidden" value="{{ product_id }}">
    <input name="product_name" type="hidden" value="{{ heading_title }}">
    <input name="product_model" type="hidden" value="{{ model }}">
    <input name="product_image" type="hidden" value="{{ dc_pro_modules_thumb }}">
    <div class="form-group">
      <!-- <label class="control-label" for="link">{{ text_link }}</label> -->
      <input class="form-control" name="link" id="link" type="text" value="" placeholder="{{ text_link }}" required>
    </div>
    <div class="form-group">
      <!-- <label class="control-label" for="input-telephone-fc">{{ text_telephone }}</label> -->
      <input class="form-control" name="telephone" id="input-telephone-fc" type="phone" value="" placeholder="{{ found_cheaper_mask }}" required>
    </div>
    <button type="button" class="btn btn-submit" id="button-found-cheaper">{{ button_submit }}</button>
  </form>
  <div class="btn-close"></div>
</div>
<script>
$(document).ready(function() {
  $("#button-found-cheaper-modal").on("click", function(){
    $(".dropdown-bg").addClass("active");
    $("#modal_found_cheaper").addClass("active");
  });
  $("#modal_found_cheaper .btn-close").on("click", function() {
    $(".dropdown-bg").removeClass("active");
    $("#modal_found_cheaper").removeClass("active");
  })
  $('#form-found-cheaper input[name="telephone"]').mask('+380 (99) 999-999-99');
  $('#button-found-cheaper').on('click', function() {
    $.ajax({
      url: 'index.php?route=extension/module/found_cheaper/add',
      type: 'post',
      dataType: 'json',
      data: $('#form-found-cheaper').serialize(),
      beforeSend: function() {
        // $('#button-found-cheaper').button('loading');
      },
      complete: function() {
        $('#button-found-cheaper').button('reset');
      },
      success: function(json) {
        if (json['error']) {
          if($('.alert-item-modal-push').length < 1) {
                  $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
                }
                if($('.alert-item').length = 6) {
                  $('.alert-item').eq(5).prevAll(".alert-item").remove();
                }
                var $alertItem = $('<li class="alert-item alert-error alert-item-error"><span class="alert-icon"></span>' + json['error'] + '<button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
                $(".alert-item-modal-push").prepend($alertItem);
                setTimeout(function() {
                    $alertItem.remove();
                }, 2400);
        }
        if (json['success']) {
          $(".dropdown-bg").removeClass("active");
          $("#modal_found_cheaper").removeClass("active");
          if($('.alert-item-modal-push').length < 1) {
                  $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
                }
                if($('.alert-item').length = 6) {
                  $('.alert-item').eq(5).prevAll(".alert-item").remove();
                }
                var $alertItem = $('<li class="alert-item alert-success alert-item-success"><span class="alert-icon"></span>' + json['success'] + '<button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
                $(".alert-item-modal-push").prepend($alertItem);
                setTimeout(function() {
                    $alertItem.remove();
                }, 2400);
          $('#form-found-cheaper input[type=\'phone\']').val('');
          $('#form-found-cheaper input[type=\'text\']').val('');
        }

        $(".btn-close-alert-modal, .dropdown-bg").on("click", function() {
          $(".alert-modal").remove();
          $('.dropdown-bg').removeClass("active");
        });
      }
    });
  });
});
</script>
{% endif %}
<script>
function copyToClipboard(element) {
  var $temp = $("<input>");
  $("body").append($temp);
  $temp.val($(element).text()).select();
  document.execCommand("copy");
  $(".btn-copy").addClass("active");
  setTimeout(function() {
    $(".btn-copy").removeClass("active");
  }, 600);
  $temp.remove();
}
</script>
{% if video_status and video_tab and videos %}
<script type="text/javascript">
    $(document).ready(function(){
        $('.embed-youtube').embedVideo();
    });
</script>
{% endif %}
{{ footer }} 
