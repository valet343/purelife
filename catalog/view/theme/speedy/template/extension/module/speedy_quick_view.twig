<div class="dw-datas">
<div class="infomesg"></div> 
  <div class="product_quick_view">
    <div class="product_quick_view_left">
      {% if images %}
      <div class="thumbnails">
        <div class="thumbnails_main">
          <div class="mySwiper2">
            <div class="swiper-wrapper">
              {% if images %}
              {% for image in images %}
              <div class="swiper-slide">
                <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" />
              </div>
              {% endfor %}
              {% endif %}
            </div>
          </div>
          <div class="swiper_arrows thumbnails_arrows">
            <div class="arrow arrow_prev"></div>
            <div class="arrow arrow_next"></div>
          </div>
        </div>
        <div thumbsSlider="" class="mySwiper thumbnails_additional">
          <div class="swiper-wrapper">
            {% if images %}
            {% for image in images %}
            <div class="swiper-slide">
              <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" />
            </div>
            {% endfor %}
            {% endif %}
          </div>
        </div>
        <script>
          var swiper = new Swiper(".mySwiper", {
            slidesPerView: "auto",
            spaceBetween: 10,
            freeMode: true,
            watchSlidesProgress: true,
          });
          var swiper2 = new Swiper(".mySwiper2", {
            navigation: {
              nextEl: ".thumbnails_arrows .arrow_next",
              prevEl: ".thumbnails_arrows .arrow_prev",
            },
            thumbs: {
              swiper: swiper,
            },
          });
        </script>
      </div>
      {% else %}
      <div class="thumbnails_main">
        <div class="item"><img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" class="thumbnail" /></div>
      </div>
      {% endif %}
    </div>   
    <div class="product_quick_view_right">
      <div class="product_quick_view_right_inner">
        <h3>{{ heading_title }}</h3>
        <div class="rating">
          {% for i in 1..5 %}
            {% if rating < i %}
            <span></span>
            {% else %}
            <span class="active"></span>
            {% endif %}
          {% endfor %}
          <p>{{ reviews }}</p>
        </div>
        <ul class="info">
          <li class="stock{% if stock_status_id == 7 %} in{% elseif stock_status_id == 5 %} out{% elseif stock_status_id == 6 %} wait{% elseif stock_status_id == 8 %} pre{% endif %}">{{ stock }}</li>
          {% if manufacturer %}
            {% if (manufacturers_img) %} 
            <li class="manufacturer">{{ text_manufacturer }} <a href="{{ manufacturers }}">{{ manufacturers_img ? '<img src="'~manufacturers_img~'" title="'~manufacturer~'" />' : '' }} {{ manufacturer }}</a></li>
            {% else %} 
            <li>{{ text_manufacturer }} <a href="{{ manufacturers }}">{{ manufacturer }}</a></li>
            {% endif %}
          {% endif %}
          <li>{{ text_model }} {{ model }}</li>
          {% if reward %}
          <li>{{ text_reward }} {{ reward }}</li>
          {% endif %}
        </ul>
        <div id="product">
          {% if options %}
            <!-- <h5 class="option-blok-open{% if count_opt %} option-blok-open-button{% else %}{% endif %}">{{ text_option }}</h5> -->
            <div style="display: none" class="options" id="dwblok-open"{% if count_opt %} style="display: none;"{% else %}{% endif %}>
            {% for option in options %}
            {% if option.type == 'select' %}
            <div class="form-group{% if option.required %} required {% endif %}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}">
                <select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control">
                  <option value="">{{ text_select }}</option>
                  {% for option_value in option.product_option_value %}
                  <option value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}">{{ option_value.name }}
                  {% if option_value.price %}
                  ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                  {% endif %} </option>
                  {% endfor %}
                </select>
              </div>
            </div>
            {% endif %}
            {% if option.type == 'radio' %}
            <div class="form-group form-group-rc{% if option.required %} required {% endif %}">
              <label class="control-label">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}"> {% for option_value in option.product_option_value %}
                  <label class="radio">
                    <input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" id="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}" />
                    {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                    <label for="{{ option_value.product_option_value_id }}" class="dc_label"></label>
                    {{ option_value.name }}
                    {% if option_value.price %}
                    ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                    {% endif %}
                  </label>
                {% endfor %}
              </div>
            </div>
            {% endif %}
            {% if option.type == 'checkbox' %}
            <div class="form-group form-group-rc{% if option.required %} required {% endif %}">
              <label class="control-label">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}">
                {% for option_value in option.product_option_value %}
                <label class="checkbox">
                  <input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" id="{{ option_value.product_option_value_id }}" data-points="{{ option_value.apo_points_value }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.apo_price_value }}" />
                  {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                  <label for="{{ option_value.product_option_value_id }}" class="dc_label"></label>
                  {{ option_value.name }}
                  {% if option_value.price %}
                  ({% if option_value.price_prefix == '+' or option_value.price_prefix == '-' %}{{ option_value.price_prefix }}{% endif %}{{ option_value.price }})
                  {% endif %}
                </label>
                {% endfor %}
              </div>
            </div>
            {% endif %}
            {% if option.type == 'text' %}
            <div class="form-group{% if option.required %} required {% endif %}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}">
                <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" />
              </div>
            </div>
            {% endif %}
            {% if option.type == 'textarea' %}
            <div class="form-group{% if option.required %} required {% endif %}">
              <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
              <div id="input-option{{ option.product_option_id }}">
                <textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
              </div>
            </div>
            {% endif %}
            {% endfor %}
          </div>
           {% endif %}
          <div class="price_buttons{% if minimum > 1 %} minimum{% endif %}">
            {% if price %}
              <div class="price">
                {% if not special %}
                <div class="price-stock">{{ price }}</div>
                {% else %}
                {% if special_percent %}<div class="percent">-{{ special_percent }}%</div>{% endif %}
                <div class="price-old">{{ price }}</div>
                <div class="price-stock price-new">{{ special }}</div>
                {% endif %}
              </div>
            {% endif %}
            <div class="quantity">
              <button type="button" class="btn btn-number" disabled="disabled" data-type="minus" data-field="quantity">-</button>
              <input id="input-quantity" type="text" name="quantity" value="{{ minimum }}" class="input-number" />
              <button type="button" class="btn btn-number" data-type="plus" data-field="quantity">+</button>
            </div>
            <input type="hidden" name="product_id" value="{{ product_id }}" />
            {% if options %}
            <a href="{{ href }}" class="btn add-to-cart btn-primary">{{ text_btn_cart }}</a>
            {% else %}
            <button type="button" id="button-dwcart" data-loading-text="{{ txt_loading }}" class="btn add-to-cart btn-primary">{{ text_btn_cart }}</button>
            {% endif %}
          </div>
          {% if minimum > 1 %}
            <div class="alert-minimum">{{ text_minimum }}</div>
          {% endif %}
        </div>
        {% if points or tax or discounts %}
        <ul class="price_info">
          {% if points %}
          <li>{{ text_points }} {{ points }}</li>
          {% endif %}
          {% if tax %}
          <li>{{ text_tax }} {{ tax }}</li>
          {% endif %}
          {% if discounts %}
          <li>
            <ul>
            {% for discount in discounts %}
              <li>{{ discount.quantity }}{{ text_discount }}{{ discount.price }}</li>
            {% endfor %}
            </ul>
          </li>
          {% endif %}
        </ul>
        {% endif %}
        <ul class="nav nav-tabs">
          <li class="active"><a href="#tab-description" data-toggle="tab">{{ tab_description }}</a></li>
          {% if attribute_groups %}
          <li><a href="#tab-specification" data-toggle="tab">{{ tab_attribute }}</a></li>
          {% endif %}
          {% if review_status %}
          <li><a href="#tab-review" data-toggle="tab">{{ tab_review }}</a></li>
          {% endif %}
        </ul>
        <div class="tab-content">
          {% if descript %}
          <div class="tab-pane active" id="tab-description">
            <div class="description_tags">{{ description }}</div>
          </div>
          {% endif %}

          {% if attribute_groups %}
          {% if specifications %}
          <div class="tab-pane" id="tab-specification">
            <div class="attribute_groups">
            {% for attribute_group in attribute_groups %}
            <p>{{ attribute_group.name }}</p>
            {% for attribute in attribute_group.attribute %}
            <div class="item">
              <div class="name"><span>{{ attribute.name }}</span></div>
              <div class="text">{{ attribute.text }}</div>
            </div>
            {% endfor %}
            {% endfor %}
            </div>
          </div>
          {% endif %}
          {% endif %}

          {% if review_status %}
          {% if review_m %}
          <div class="tab-pane" id="tab-review">
            <div id="review"></div>
          </div>
          {% endif %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript"><!--
{% if count_opt %}
$('.option-blok-open-button').on('click', function() {
    if(document.getElementById('dwblok-open').style.display == 'none') {
	    $('#dwblok-open').show(500);
      $('.option-blok-open-button').addClass("active");
	} else {
	    $('#dwblok-open').hide(500);
      $('.option-blok-open-button').removeClass("active");
	}
});

$('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){
  $.ajax({
    url: 'index.php?route=product/product/getRecurringDescription',
    type: 'post',
    data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
    dataType: 'json',
    beforeSend: function() {
      $('#recurring-description').html('');
    },
    success: function(json) {
      $('.alert-dismissible, .text-danger').remove();

      if (json['success']) {
        $('#recurring-description').html(json['success']);
      }
    }
  });
});
{% endif %}

$('body').on('click', '#button-dwcart', function(){
  $.ajax({
    url: 'index.php?route=checkout/cart/add',
    type: 'post',
    data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
    dataType: 'json',
    beforeSend: function() {
      $('#button-cart-quickview').button('loading');
    },
    complete: function() {
      $('#button-cart-quickview').button('reset');
    },
    success: function(json) {
      $('.alert-dismissible, .text-danger').remove();
      $('.form-group').removeClass('has-error');

      if (json['error']) {
        if (json['error']['option']) {
          for (i in json['error']['option']) {
            var element = $('#input-option' + i.replace('_', '-'));

            if (element.parent().hasClass('input-group')) {
              element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
            } else {
              element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
            }
          }
        }

        if (json['error']['recurring']) {
          $('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
        }

        // Highlight any found errors
        $('.text-danger').parent().addClass('has-error');
      }

      if (json['success']) {
        setTimeout(function () {
          $('#cart-total').text(json['total']);
        }, 100);

        $("#dwquickview-modal").removeClass("active");
        $(".dropdown-bg").removeClass("active");

        if (json['cart_alert_type'] == "modal") {
          $('.dropdown-bg').addClass("active");
          $('body').append('<div class="alert-modal alert-item-modal"><h3>' + json['title'] + '</h3><div class="caption"><p>' + json['success'] + '</p></div><ul class="buttons"><button class="btn btn-gray btn-close-alert-modal">' + json["text_continue"] + '</button><a class="btn" href="' + json["link_checkout"] + '">' + json["text_checkout"] + '</a></ul><button class="btn-close btn-close-alert-modal"></button></div>');
        } else {
          if($('.alert-item-modal-push').length < 1) {
            $('body').append('<ul class="alert-modal alert-item-modal-push"></ul>');
          }
          if($('.alert-item').length = 6) {
            $('.alert-item').eq(5).prevAll(".alert-item").remove();
          }
          var $alertItem = $('<li class="alert-item alert-success"><p>' + json['success'] + '</p><button class="btn-close btn-close-alert-modal"></button></li>').addClass("alert-item-animate");
          $(".alert-item-modal-push").prepend($alertItem);
          setTimeout(function() {
              $alertItem.remove();
          }, 2400);
        }

        $(".btn-close-alert-modal, .dropdown-bg").on("click", function() {
          $(".alert-modal").remove();
          $('.dropdown-bg').removeClass("active");
        })

        $('#cart > ul > span').load('index.php?route=common/cart/info ul li');
      }
    },
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
  });
});
//--></script>
<script type="text/javascript"><!--
{% if bookmarks %}
//*** ===================  ***//
function wishlistAdd(product_id) {
	$.ajax({
		url: 'index.php?route=account/wishlist/add',
		type: 'post',
		data: 'product_id=' + product_id,
		dataType: 'json',
		success: function(json) {
			$('.alert-dismissible').remove();

			if (json['redirect']) {
				location = json['redirect'];
			}

			if (json['success']) {
				$('.infomesg').append('<div class="alert sd-alert sd-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>').show();
                $(".sd-alert").delay(3800).fadeOut(400);
			}

			$('#wishlist-total span').html(json['total']);
			$('#wishlist-total').attr('title', json['total']);
		}
	})
}
{% endif %}
{% if comparison %}
//*** ===================  ***//
function compareAdd(product_id) {
	$.ajax({
		url: 'index.php?route=product/compare/add',
		type: 'post',
		data: 'product_id=' + product_id,
		dataType: 'json',
		success: function(json) {
			$('.alert-dismissible').remove();

			if (json['success']) {
				$('.infomesg').append('<div class="alert sd-alert sd-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>').show();
                $(".sd-alert").delay(3800).fadeOut(400);
			}
					
			$('#compare-total').html(json['total']);
		}
	})
}
{% endif %}

$('#review').delegate('.pagination a', 'click', function(e) {
    e.preventDefault();
    $('#review').fadeOut('slow');

    $('#review').load(this.href);

    $('#review').fadeIn('slow');
});

{% if review_m %}
$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

$('#button-review').on('click', function() {
  $.ajax({
    url: 'index.php?route=product/product/write&product_id={{ product_id }}',
    type: 'post',
    dataType: 'json',
    data: $("#form-review").serialize(),
    beforeSend: function() {
      $('#button-review').button('loading');
    },
    complete: function() {
      $('#button-review').button('reset');
    },
    success: function(json) {
      $('.alert-dismissible').remove();

      if (json['error']) {
        $('.infomesg').after('<div class="alert sd-alert sd-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>').show();
      }

      if (json['success']) {
        $('.infomesg').after('<div class="alert sd-alert sd-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + ' <button type="button" class="close" data-dismiss="alert">&times;</button></div>').show();
        $(".sd-alert").delay(3800).fadeOut(400);
		
        $('input[name=\'name\']').val('');
        $('textarea[name=\'text\']').val('');
        $('input[name=\'rating\']:checked').prop('checked', false);
      }
    }
  });
});
{% endif %}   
//--></script>
<!--for product quantity plus minus-->
<script type="text/javascript">
/* plugin bootstrap minus and plus 
 * 17-10-84
*/
$(document).ready(function() {
    $('.btn-number').click(function(e){
        e.preventDefault();
        var fieldName = $(this).attr('data-field');
        var type = $(this).attr('data-type');
        var input = $("input[name='" + fieldName + "']");
        var currentVal = parseInt(input.val());
        if (!isNaN(currentVal)) {
            if (type == 'minus') {
                var minValue = parseInt(input.attr('min'));
                if (!minValue) minValue = 1;
                if (currentVal > minValue) {
                    input.val(currentVal - 1).change();
                }
                if (parseInt(input.val()) == minValue) {
                    $(this).attr('disabled', true);
                }

            } else if (type == 'plus') {
                var maxValue = parseInt(input.attr('max'));
                if (!maxValue) maxValue = 999;
                if (currentVal < maxValue) {
                    input.val(currentVal + 1).change();
                }
                if (parseInt(input.val()) == maxValue) {
                    $(this).attr('disabled', true);
                }
            }
        } else {
            input.val(0);
        }
    });
    $('.input-number').focusin(function(){
        $(this).data('oldValue', $(this).val());
    });
    $('.input-number').change(function() {

    var minValue = parseInt($(this).attr('min'));
    var maxValue = parseInt($(this).attr('max'));
    if (!minValue) minValue = 1;
    if (!maxValue) maxValue = 999;
    var valueCurrent = parseInt($(this).val());
    var name = $(this).attr('name');
    if (valueCurrent >= minValue) {
        $(".btn-number[data-type='minus'][data-field='" + name + "']").removeAttr('disabled')
    } else {
        alert('Sorry, the minimum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    if (valueCurrent <= maxValue) {
        $(".btn-number[data-type='plus'][data-field='" + name + "']").removeAttr('disabled')
    } else {
        alert('Sorry, the maximum value was reached');
        $(this).val($(this).data('oldValue'));
    }
    });
    $(".input-number").keydown(function (e) {
    // Allow: backspace, delete, tab, escape, enter and .
    if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== - 1 ||
            // Allow: Ctrl+A
                    (e.keyCode == 65 && e.ctrlKey === true) ||
                    // Allow: home, end, left, right
                            (e.keyCode >= 35 && e.keyCode <= 39)) {
            // let it happen, don't do anything
            return;
            }
            // Ensure that it is a number and stop the keypress
            if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
            e.preventDefault();
            }
            });
});

</script>